<!DOCTYPE html>
<html lang="en" style="--base-font-size: 16px;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutorial - 8</title> <!-- Updated Title -->
    <!-- MathJax Configuration -->
    <script>
        MathJax = {
          tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']], processEscapes: true },
          options: { skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'], ignoreHtmlClass: 'tex2jax_ignore', processHtmlClass: 'tex2jax_process' },
          svg: { fontCache: 'global' },
          startup: { ready: () => { console.log('MathJax ready.'); MathJax.startup.defaultReady(); MathJax.startup.promise.then(() => console.log('MathJax initial typeset complete.')); } }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

    <style>
        /* --- START OF FINAL CSS --- */
        :root {
            --accent-color: #F08080;
            --bg-color: #1e1e1e;
            --text-color: #e0e0e0;
            --border-color: #555;
            --header-bg: #2f2f2f;
            --header-hover-bg: #3f3f3f;
            --content-bg: #282828;
            --solution-text-bg: #252525;
            --slider-track-color: #444; /* Dark track for slider */
            --base-font-size: 16px;
            --anim-duration: 0.7s;
            --content-fade-duration: 0.5s;
            --collapse-delay: 0.1s;
            --anim-easing: cubic-bezier(0.65, 0, 0.35, 1);

            /* Star Colors */
            --color-stars-red: #f1948a;
            --color-stars-yellow: #f7dc6f;
            --color-stars-green: #58d68d;
            --color-stars-grey: #777;

            /* Monospace Font Stack */
            --monospace-font-stack: 'SF Mono', 'Consolas', 'Liberation Mono', 'Courier New', monospace;
        }

        body {
            background-color: var(--bg-color); color: var(--text-color);
            font-family: var(--monospace-font-stack); /* Default to monospace */
            line-height: 1.7;
            margin: 0; padding: 20px; font-size: var(--base-font-size);
            transition: font-size 0.2s ease-in-out;
            padding-bottom: 80px; /* Space for slider */
            overflow-x: hidden;
        }
        h1 {
            color: var(--accent-color); text-align: center;
            border-bottom: 3px solid var(--accent-color); padding-bottom: 15px;
            margin-bottom: 30px; font-size: 2.5em;
            /* Inherits monospace */
        }
        .accordion { max-width: 900px; margin: 20px auto; }
        .accordion-item {
            border: 1px solid var(--border-color); border-radius: 8px;
            overflow: hidden; margin-bottom: 25px; background-color: var(--content-bg);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: box-shadow 0.3s ease, border-color 0.3s ease;
        }
         .accordion-item:hover {
            border-color: #777;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }
        .accordion-header {
            background-color: var(--header-bg);
            padding: 18px 25px; cursor: pointer;
            display: flex; justify-content: space-between; align-items: center;
            transition: background-color 0.3s ease, border-color var(--anim-duration) var(--anim-easing);
            border-bottom: 1px solid var(--border-color); position: relative; z-index: 2;
        }
        .accordion-item[data-state="collapsed"] .accordion-header { border-bottom-color: transparent; }
        .accordion-header:hover { background-color: var(--header-hover-bg); }
        .accordion-header h2 {
            margin: 0; font-size: 1.2em; color: var(--text-color);
            /* Inherits monospace */
         }

        /* Content Area & Animations */
        .accordion-content {
            padding: 0 25px; max-height: 0; overflow: hidden;
            transition: max-height var(--anim-duration) var(--anim-easing),
                        padding-top var(--anim-duration) var(--anim-easing),
                        padding-bottom var(--anim-duration) var(--anim-easing);
            box-sizing: border-box; position: relative; z-index: 1;
        }
        .accordion-content.active { padding-top: 20px; }
        .content-inner {
            opacity: 0;
            transform: translateY(15px);
            transition: opacity var(--content-fade-duration) var(--anim-easing) 0s,
                        transform var(--content-fade-duration) var(--anim-easing) 0s;
            will-change: opacity, transform;
            padding-bottom: 25px;
        }
        .accordion-content.active .content-inner {
            opacity: 1;
            transform: translateY(0);
            transition-delay: calc(var(--anim-duration) * 0.3);
            transition-duration: var(--content-fade-duration);
        }

        /* Content Blocks Structure & Styling */
        .question-block, .final-answer-block, .ratings-block, .solution-block {
            margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px dashed var(--border-color);
        }
        .content-inner > div:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
        .ratings-block { margin-bottom: 25px !important; padding-bottom: 20px !important; }

        .question-block strong, .final-answer-block strong, .solution-block strong {
            color: var(--accent-color); display: block; margin-bottom: 8px;
            font-size: 1.1em;
            /* Inherits monospace */
        }
        .question-block p,
        .final-answer-block p {
            font-size: inherit;
            margin: 5px 0 1em 0;
            /* Inherits monospace */
        }
        /* Code block specific styling */
        .question-block pre, .solution-text pre {
            background-color: var(--solution-text-bg); /* Match solution bg */
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 10px 15px;
            overflow-x: auto;
            font-family: var(--monospace-font-stack); /* Ensure monospace */
            font-size: 0.95em; /* Slightly smaller */
            white-space: pre; /* Preserve whitespace */
            margin: 1em 0;
        }
        /* Style for simple tables within pre tags */
        .solution-text table {
            border-collapse: collapse;
            margin: 1em 0;
            font-size: 0.95em; /* Match pre size */
            width: auto; /* Don't force full width */
            border: 1px solid var(--border-color);
        }
        .solution-text th, .solution-text td {
            border: 1px solid var(--border-color);
            padding: 6px 10px;
            text-align: center; /* Center align table content */
        }
        .solution-text th {
            background-color: var(--header-bg); /* Use header background for table header */
            font-weight: bold;
        }


        .solution-text {
            background-color: var(--solution-text-bg); padding: 15px; border-radius: 5px;
            border: 1px solid #444; color: #ccc; font-size: 1em; line-height: 1.8;
            font-family: var(--monospace-font-stack); /* Explicitly set, inherits anyway */
        }
        .solution-text p, .solution-text li {
            margin-bottom: 1em;
            font-family: inherit; /* Inherit monospace */
        }
        .solution-text *:last-child { margin-bottom: 0; }
        .solution-text ul, .solution-text ol { padding-left: 25px; margin: 0.5em 0 1em 0; }
        .solution-text > strong {
            color: var(--text-color); font-size: 1.05em; margin: 15px 0 10px 0;
            display: block;
            /* Inherits monospace */
        }
        .solution-text > strong:first-of-type { margin-top: 0; }

        /* Star Ratings */
        .stars { font-size: 1.3em; letter-spacing: 3px; display: inline-block;
                 font-family: initial; /* Keep default font for star glyphs */
               }
        .star-filled.green { color: var(--color-stars-green); }
        .star-filled.yellow { color: var(--color-stars-yellow); }
        .star-filled.red { color: var(--color-stars-red); }
        .star-empty { color: var(--color-stars-grey); }
        .rating-label {
            font-weight: bold; color: #bdbdbd; display: inline-block;
            min-width: 140px; vertical-align: middle;
            /* Inherits monospace */
        }
        .ratings-block .stars { vertical-align: middle; }

        /* Utility & MathJax */
        .hidden { display: none; }
        mjx-container {
            font-size: 1.05em; text-align: left !important;
            overflow-x: auto; overflow-y: hidden; padding: 2px 0;
            /* Keep specific math fonts for MathJax */
            font-family: 'Latin Modern Math', 'STIX Two Math', serif;
        }

        /* Font Control - Minimalistic */
        .font-control {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: transparent; /* No background */
            padding: 0px 20px 15px 20px; /* Spacing */
            box-sizing: border-box;
            display: flex;
            align-items: center;
            border-top: none; /* No border */
            z-index: 10;
        }
        #fontSizeSlider {
            flex-grow: 1;
            cursor: pointer;
            margin: 0 15px;
            accent-color: var(--accent-color); /* Styles thumb in modern browsers */
            min-width: 100px;
            height: 6px; /* Track height */
            background: transparent;
            -webkit-appearance: none;
            appearance: none;
        }
        /* Track Styling */
        #fontSizeSlider::-webkit-slider-runnable-track {
            height: 6px;
            background: var(--slider-track-color);
            border-radius: 3px;
        }
        #fontSizeSlider::-moz-range-track {
             height: 6px;
            background: var(--slider-track-color);
            border-radius: 3px;
        }
        /* Thumb Styling */
        #fontSizeSlider::-webkit-slider-thumb {
            -webkit-appearance: none; /* Override default */
            appearance: none;
            margin-top: -5px; /* Vertically center (16px thumb on 6px track) */
            background-color: var(--accent-color);
            height: 16px;
            width: 16px;
            border-radius: 50%; /* Make it round */
            cursor: pointer;
            transition: transform 0.15s ease-in-out; /* Smooth interaction */
        }
        #fontSizeSlider::-moz-range-thumb {
            background-color: var(--accent-color);
            height: 16px;
            width: 16px;
            border-radius: 50%;
            cursor: pointer;
            border: none; /* Remove Firefox border */
            transition: transform 0.15s ease-in-out; /* Smooth interaction */
        }
         /* Optional: Slight scale effect on interaction */
         #fontSizeSlider:active::-webkit-slider-thumb {
             transform: scale(1.1);
         }
         #fontSizeSlider:active::-moz-range-thumb {
            transform: scale(1.1);
         }

        #fontSizeValue {
            min-width: 50px; text-align: right; font-weight: bold;
            color: var(--text-color); font-size: 12px !important;
            /* Inherits monospace */
        }
        /* --- END OF FINAL CSS --- */
    </style>
</head>
<body>

    <h1>Tutorial - 8</h1>

    <div class="accordion">

        <!-- Question 1 -->
        <div class="accordion-item" data-state="collapsed">
            <div class="accordion-header">
                <h2>1. PDF Transformation (Uniform to Exponential)</h2>
                <span class="difficulty-rating"></span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">
                    <div class="question-block hidden">
                        <strong>Question:</strong>
                        <p>Suppose that X has the pdf f(x). Consider another random variable Y = h(X), such that h(•) is an invertible function, and the inverse is given by x = k(y). Then it can be shown that the pdf of Y is $g(y) = f[k(y)] \cdot |k'(y)|$. If X has a uniform distribution with A = 0 and B = 1, derive the pdf of Y = - ln(X).</p>
                    </div>
                     <div class="ratings-block hidden">
                        <span class="rating-label">Length Rating:</span> <span class="length-rating"></span><br>
                        <span class="rating-label">Complexity Rating:</span> <span class="complexity-rating"></span>
                    </div>
                    <div class="final-answer-block hidden">
                        <strong>Final Answer:</strong>
                        <p>The pdf of Y is $g(y) = e^{-y}$ for $y \ge 0$ (Exponential distribution with λ=1).</p>
                    </div>
                    <div class="solution-block hidden">
                        <strong>Full Solution:</strong>
                        <div class="solution-text">
                            <p>$X \sim U[0, 1]$. PDF $f(x)=1$ for $0 \le x \le 1$.<br>
                            Transformation $Y = h(X) = -\ln(X)$.</p>
                            <p>Inverse function $x=k(y)$: $y=-\ln(x) \implies -y=\ln(x) \implies x=e^{-y}$.<br>
                            So $k(y)=e^{-y}$.</p>
                            <p>Derivative $k'(y) = -e^{-y}$.</p>
                            <p>Range of Y: As $x \to 0^+$, $Y \to \infty$. As $x \to 1^-$, $Y \to 0$. So $y \ge 0$.</p>
                            <p>Apply formula $g(y) = f[k(y)] \cdot |k'(y)|$.<br>
                            $g(y) = f(e^{-y}) \cdot |-e^{-y}|$.<br>
                            We need $0 \le e^{-y} \le 1$ for $f(e^{-y})=1$. This holds for $y \ge 0$.<br>
                            $|-e^{-y}| = e^{-y}$ since $e^{-y} > 0$.</p>
                            <p>For $y \ge 0$: $g(y) = 1 \cdot e^{-y} = e^{-y}$.<br>
                            For $y < 0$: $g(y) = 0$.</p>
                            <p>$g(y) = e^{-y}$ for $y \ge 0$, which is Exp(λ=1).</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question 2 -->
        <div class="accordion-item" data-state="collapsed">
            <div class="accordion-header">
                <h2>2. Normal Transformation / Log-Normal PDF</h2>
                <span class="difficulty-rating"></span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">
                    <div class="question-block hidden">
                        <strong>Question:</strong>
                        <p>Let Z have a standard normal distribution and define a new random variable Y by Y = σZ + μ.<br>
                        (a) Show that Y has a normal distribution with parameters μ and σ.<br>
                        (b) Find the pdf of X = e<sup>Y</sup>.</p>
                    </div>
                     <div class="ratings-block hidden">
                        <span class="rating-label">Length Rating:</span> <span class="length-rating"></span><br>
                        <span class="rating-label">Complexity Rating:</span> <span class="complexity-rating"></span>
                    </div>
                    <div class="final-answer-block hidden">
                        <strong>Final Answer:</strong>
                        <p>(a) Derived pdf is $f_Y(y) = \frac{1}{\sqrt{2\pi}\sigma} e^{-\frac{(y-\mu)^2}{2\sigma^2}}$, which is $N(\mu, \sigma^2)$.<br>
                        (b) The pdf of X is $f_X(x) = \frac{1}{\sqrt{2\pi}\sigma x} e^{-\frac{(\ln(x)-\mu)^2}{2\sigma^2}}$ for $x > 0$ (Log-normal distribution).</p>
                    </div>
                    <div class="solution-block hidden">
                        <strong>Full Solution:</strong>
                        <div class="solution-text">
                            <strong>(a) Show Y ~ N(μ, σ²):</strong>
                            <p>$Z \sim N(0, 1)$, pdf $f_Z(z) = \frac{1}{\sqrt{2\pi}} e^{-z^2/2}$.<br>
                            Transformation $Y = \sigma Z + \mu$. Inverse $Z = k(y) = (Y - \mu)/\sigma$.<br>
                            Derivative $k'(y) = 1/\sigma$.</p>
                            <p>Use formula $f_Y(y) = f_Z[k(y)] \cdot |k'(y)|$.<br>
                            $f_Y(y) = \frac{1}{\sqrt{2\pi}} e^{-[(y-\mu)/\sigma]^2 / 2} \cdot |\frac{1}{\sigma}|$<br>
                            $f_Y(y) = \frac{1}{\sqrt{2\pi}\sigma} e^{-\frac{(y-\mu)^2}{2\sigma^2}}$, for $-\infty < y < \infty$.<br>
                            This is the pdf of $N(\mu, \sigma^2)$.</p>
                            <strong>(b) Find pdf of X = e<sup>Y</sup>:</strong>
                            <p>$Y \sim N(\mu, \sigma^2)$. Transformation $X = e^Y$. Inverse $Y = k(x) = \ln(x)$.<br>
                            Derivative $k'(x) = 1/x$.<br>
                            Range of Y is $(-\infty, \infty)$, so range of X is $(0, \infty)$.</p>
                            <p>Use formula $f_X(x) = f_Y[k(x)] \cdot |k'(x)|$.<br>
                            $f_X(x) = \frac{1}{\sqrt{2\pi}\sigma} e^{-\frac{(\ln(x)-\mu)^2}{2\sigma^2}} \cdot |\frac{1}{x}|$.<br>
                            Since $x > 0$, $|1/x| = 1/x$.<br>
                            $f_X(x) = \frac{1}{\sqrt{2\pi}\sigma x} e^{-\frac{(\ln(x)-\mu)^2}{2\sigma^2}}$, for $x > 0$.<br>
                            This is the pdf of a Log-normal distribution.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question 3 -->
        <div class="accordion-item" data-state="collapsed">
            <div class="accordion-header">
                <h2>3. Gamma Transformation (Scaling)</h2>
                <span class="difficulty-rating"></span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">
                    <div class="question-block hidden">
                        <strong>Question:</strong>
                        <p>(a) Suppose the lifetime X of a component, when measured in hours, has a gamma distribution with parameters α and β. Let Y = the lifetime measured in minutes. Derive the pdf of Y.<br>
                        (b) If X has a gamma distribution with parameters α and β, what is the probability distribution of Y = cX ?</p>
                    </div>
                     <div class="ratings-block hidden">
                        <span class="rating-label">Length Rating:</span> <span class="length-rating"></span><br>
                        <span class="rating-label">Complexity Rating:</span> <span class="complexity-rating"></span>
                    </div>
                    <div class="final-answer-block hidden">
                        <strong>Final Answer:</strong>
                        <p>(a) $Y \sim Gamma(\alpha, 60\beta)$.<br>
                        (b) $Y = cX \sim Gamma(\alpha, c\beta)$.</p>
                    </div>
                    <div class="solution-block hidden">
                        <strong>Full Solution:</strong>
                        <div class="solution-text">
                            <p>$X \sim Gamma(\alpha, \beta)$. PDF $f_X(x) = \frac{1}{\beta^\alpha \Gamma(\alpha)} x^{\alpha-1} e^{-x/\beta}$ for $x \ge 0$.</p>
                            <strong>(a) Y = Lifetime in minutes = 60X:</strong>
                            <p>Transformation $Y=60X$. Inverse $X=k(Y)=Y/60$. Derivative $k'(y)=1/60$.<br>
                            PDF $f_Y(y) = f_X[k(y)] \cdot |k'(y)|$<br>
                            $= \frac{1}{\beta^\alpha \Gamma(\alpha)} (y/60)^{\alpha-1} e^{-(y/60)/\beta} \cdot \frac{1}{60}$<br>
                            $= \frac{1}{\beta^\alpha 60^{\alpha-1} \Gamma(\alpha)} y^{\alpha-1} e^{-y/(60\beta)} \frac{1}{60}$<br>
                            $= \frac{1}{(60\beta)^\alpha \Gamma(\alpha)} y^{\alpha-1} e^{-y/(60\beta)}$ for $y \ge 0$.<br>
                            This is the PDF of $Gamma(\alpha, 60\beta)$.</p>
                            <strong>(b) Y = cX (c > 0):</strong>
                            <p>Transformation $Y=cX$. Inverse $X=k(Y)=Y/c$. Derivative $k'(y)=1/c$.<br>
                            PDF $f_Y(y) = f_X[k(y)] \cdot |k'(y)|$<br>
                            $= \frac{1}{\beta^\alpha \Gamma(\alpha)} (y/c)^{\alpha-1} e^{-(y/c)/\beta} \cdot \frac{1}{c}$<br>
                            $= \frac{1}{(c\beta)^\alpha \Gamma(\alpha)} y^{\alpha-1} e^{-y/(c\beta)}$ for $y \ge 0$.<br>
                            This is the PDF of $Gamma(\alpha, c\beta)$.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question 4 -->
        <div class="accordion-item" data-state="collapsed">
            <div class="accordion-header">
                <h2>4. Generating Exponential from Uniform</h2>
                <span class="difficulty-rating"></span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">
                    <div class="question-block hidden">
                        <strong>Question:</strong>
                        <p>Let U have a uniform distribution on the interval [0,1]. Let X = -(1/λ)ln(1 - U). Show that X has an exponential distribution with parameter λ.</p>
                    </div>
                     <div class="ratings-block hidden">
                        <span class="rating-label">Length Rating:</span> <span class="length-rating"></span><br>
                        <span class="rating-label">Complexity Rating:</span> <span class="complexity-rating"></span>
                    </div>
                    <div class="final-answer-block hidden">
                        <strong>Final Answer:</strong>
                        <p>Derived CDF of X is $F_X(x) = 1 - e^{-\lambda x}$ for $x \ge 0$, which is the CDF of an Exponential(λ) distribution.</p>
                    </div>
                    <div class="solution-block hidden">
                        <strong>Full Solution:</strong>
                        <div class="solution-text">
                            <p>$U \sim U[0, 1]$. CDF $F_U(u)=u$ for $0 \le u \le 1$.<br>
                            Transformation $X = -\frac{1}{\lambda} \ln(1 - U)$.</p>
                            <p>Find CDF of X, $F_X(x) = P(X \le x)$. Range of X is $[0, \infty)$.<br>
                            $P(-\frac{1}{\lambda} \ln(1 - U) \le x)$<br>
                            $P(\ln(1 - U) \ge -\lambda x)$ (mult by $-\lambda$, reverse inequality)<br>
                            $P(1 - U \ge e^{-\lambda x})$ (exponentiate)<br>
                            $P(1 - e^{-\lambda x} \ge U) = P(U \le 1 - e^{-\lambda x})$.</p>
                            <p>Since $x \ge 0$, $0 < e^{-\lambda x} \le 1$, so $0 \le 1 - e^{-\lambda x} < 1$.<br>
                            The value $1 - e^{-\lambda x}$ is within the support [0, 1] of U.<br>
                            $P(U \le 1 - e^{-\lambda x}) = F_U(1 - e^{-\lambda x}) = 1 - e^{-\lambda x}$.</p>
                            <p>So, $F_X(x) = 1 - e^{-\lambda x}$ for $x \ge 0$, and 0 otherwise.<br>
                            This is the CDF of an Exponential distribution with parameter $\lambda$.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question 5 -->
        <div class="accordion-item" data-state="collapsed">
            <div class="accordion-header">
                <h2>5. Gneiss Requirement (Gamma)</h2>
                <span class="difficulty-rating"></span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">
                    <div class="question-block hidden">
                        <strong>Question:</strong>
                        <p>At a construction site, the daily requirement of gneiss (in metric tons) is a random variable having a gamma distribution with α = 2 and β = 5. If their supplier's daily supply capacity is 25 metric tons, what is the probability that this capacity will be inadequate on any given day?</p>
                    </div>
                     <div class="ratings-block hidden">
                        <span class="rating-label">Length Rating:</span> <span class="length-rating"></span><br>
                        <span class="rating-label">Complexity Rating:</span> <span class="complexity-rating"></span>
                    </div>
                    <div class="final-answer-block hidden">
                        <strong>Final Answer:</strong>
                        <p>The probability is $P(X > 25) = 6e^{-5} \approx 0.0404$.</p>
                    </div>
                    <div class="solution-block hidden">
                        <strong>Full Solution:</strong>
                        <div class="solution-text">
                            <p>X = daily requirement. $X \sim Gamma(\alpha=2, \beta=5)$. Capacity = 25.<br>
                            Inadequate if $X > 25$. We need $P(X > 25)$.</p>
                            <p>PDF: $f(x) = \frac{1}{5^2 \Gamma(2)} x^{2-1} e^{-x/5} = \frac{1}{25} x e^{-x/5}$ for $x \ge 0$.</p>
                            <p>$P(X > 25) = \int_{25}^{\infty} \frac{1}{25} x e^{-x/5} dx$.</p>
                            <p>Use Integration by Parts: $u=x, dv=\frac{1}{25}e^{-x/5}dx$. $du=dx, v=-\frac{1}{5}e^{-x/5}$.<br>
                            $\int udv = uv - \int vdu$<br>
                            $= [x(-\frac{1}{5}e^{-x/5})]_{25}^{\infty} - \int_{25}^{\infty} (-\frac{1}{5}e^{-x/5}) dx$<br>
                            $= [-\frac{x}{5}e^{-x/5}]_{25}^{\infty} + \frac{1}{5} \int_{25}^{\infty} e^{-x/5} dx$<br>
                            $= (0 - (-\frac{25}{5}e^{-25/5})) + \frac{1}{5} [-5e^{-x/5}]_{25}^{\infty}$<br>
                            $= 5e^{-5} + [-e^{-x/5}]_{25}^{\infty}$<br>
                            $= 5e^{-5} + (0 - (-e^{-25/5})) = 5e^{-5} + e^{-5} = 6e^{-5}$.</p>
                            <p>$P(X > 25) = 6e^{-5} \approx 6(0.006738) \approx 0.0404$.</p>
                            <p>(Alternatively, using Poisson relationship: $P(Gamma(2,5) > 25) = P(Poisson(25/5) < 2) = P(Poisson(5) \le 1) = P(Y=0)+P(Y=1) = \frac{e^{-5}5^0}{0!} + \frac{e^{-5}5^1}{1!} = e^{-5} + 5e^{-5} = 6e^{-5}$).</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question 6 -->
        <div class="accordion-item" data-state="collapsed">
            <div class="accordion-header">
                <h2>6. Magazine Sales Expectation (Poisson)</h2>
                <span class="difficulty-rating"></span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">
                    <div class="question-block hidden">
                        <strong>Question:</strong>
                        <p>A newsstand has ordered five copies of a certain issue of a photography magazine. Let X = the number of individuals who come in to purchase this magazine. If X has a Poisson distribution with parameter μ = 4, what is the expected number of copies that are sold?</p>
                    </div>
                     <div class="ratings-block hidden">
                        <span class="rating-label">Length Rating:</span> <span class="length-rating"></span><br>
                        <span class="rating-label">Complexity Rating:</span> <span class="complexity-rating"></span>
                    </div>
                    <div class="final-answer-block hidden">
                        <strong>Final Answer:</strong>
                        <p>The expected number of copies sold is approximately 3.59.</p>
                    </div>
                    <div class="solution-block hidden">
                        <strong>Full Solution:</strong>
                        <div class="solution-text">
                            <p>Stock = 5. Demand $X \sim Poisson(\mu=4)$. Y = copies sold = $\min(X, 5)$.<br>
                            Want $E[Y] = E[\min(X, 5)] = \sum_{k=0}^{\infty} \min(k, 5) P(X=k)$.<br>
                            $E[Y] = \sum_{k=0}^{4} k P(X=k) + 5 \sum_{k=5}^{\infty} P(X=k) = \sum_{k=1}^{4} k P(X=k) + 5 P(X \ge 5)$.</p>
                            <p>Probabilities $P(X=k) = e^{-4}4^k/k!$ for $\mu=4$:<br>
                            P(0)≈0.0183, P(1)≈0.0733, P(2)≈0.1465, P(3)≈0.1954, P(4)≈0.1954.<br>
                            $P(X \le 4) \approx 0.6289$.<br>
                            $P(X \ge 5) = 1 - P(X \le 4) \approx 1 - 0.6289 = 0.3711$.</p>
                            <p>$E[Y] \approx (1 \times 0.0733) + (2 \times 0.1465) + (3 \times 0.1954) + (4 \times 0.1954) + (5 \times 0.3711)$<br>
                            $E[Y] \approx 0.0733 + 0.2930 + 0.5862 + 0.7816 + 1.8555 \approx 3.5896$.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div> <!-- end accordion -->

    <!-- Font Size Slider -->
    <div class="font-control">
        <input type="range" id="fontSizeSlider" min="10" max="50" value="16" step="1">
        <span id="fontSizeValue">16px</span>
    </div>

    <!-- JavaScript -->
    <script>
        // --- Data for Ratings (Tutorial 8) ---
        const questionsData = [
            { lengthRating: 3, complexityRating: 2 }, // Q1
            { lengthRating: 4, complexityRating: 2 }, // Q2
            { lengthRating: 3, complexityRating: 2 }, // Q3
            { lengthRating: 3, complexityRating: 2 }, // Q4
            { lengthRating: 3, complexityRating: 2 }, // Q5
            { lengthRating: 3, complexityRating: 2 }  // Q6
        ];

        // --- Utility Functions ---
        function generateStars(rating) { const roundedRating = Math.max(1, Math.min(5, Math.round(rating))); let colorClass; if (roundedRating <= 2) { colorClass = 'green'; } else if (roundedRating === 3) { colorClass = 'yellow'; } else { colorClass = 'red'; } let starsHTML = '<span class="stars">'; for (let i = 1; i <= 5; i++) { starsHTML += `<span class="star-${i <= roundedRating ? 'filled ' + colorClass : 'empty'}">${i <= roundedRating ? '★' : '☆'}</span>`; } starsHTML += '</span>'; return starsHTML; }
        function calculateDifficulty(lengthRating, complexityRating) { const avg = (lengthRating + complexityRating) / 2; return Math.max(1, Math.min(5, Math.round(avg))); }
        function debounce(func, wait) { let timeout; return function executedFunction(...args) { const later = () => { clearTimeout(timeout); func(...args); }; clearTimeout(timeout); timeout = setTimeout(later, wait); }; }
        const mathJaxLoadedPromise = new Promise((resolve) => { if (window.MathJax && window.MathJax.startup) { window.MathJax.startup.promise.then(resolve); } else { window.addEventListener('MathJaxLoaded', resolve, {once: true}); } }); if (document.readyState === "complete" || document.readyState === "interactive") { if(window.MathJax && window.MathJax.startup) window.dispatchEvent(new Event('MathJaxLoaded')); } else { window.addEventListener('load', () => { if(window.MathJax && window.MathJax.startup) window.dispatchEvent(new Event('MathJaxLoaded')); }); }
        function typesetMath(elements = [document.body]) { console.log("Attempting to typeset math in:", elements); mathJaxLoadedPromise.then(() => { console.log("MathJax confirmed ready, calling typesetPromise."); return MathJax.typesetPromise(elements); }).then(() => { console.log("MathJax typesetting complete for:", elements); }).catch(err => console.error('MathJax Typesetting Error:', err)); }

        // --- Accordion Update Function ---
         function updateAccordion(contentElement, makeActive) {
            if (!contentElement) return;
            const innerContent = contentElement.querySelector('.content-inner');
            const collapseDelay = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--collapse-delay') || '0.1') * 1000; // Read from CSS var

             if (makeActive) {
                 // EXPANDING
                 contentElement.classList.add('active');
                 typesetMath([innerContent]);
                 requestAnimationFrame(() => { // Ensure DOM update before measurement
                    const currentTransition = contentElement.style.transition;
                     contentElement.style.transition = 'none'; // Temporarily disable transitions for height calculation
                    const scrollHeight = innerContent.offsetHeight;
                    const style = window.getComputedStyle(contentElement);
                    const totalHeight = scrollHeight + parseFloat(style.paddingTop);
                     contentElement.style.maxHeight = totalHeight + "px"; // Set target height
                    console.log(`Expanding: Calculated totalHeight = ${totalHeight}px`);
                     requestAnimationFrame(() => { // Re-enable transitions after height is set
                         contentElement.style.transition = currentTransition;
                     });
                });
            } else {
                 // CLOSING
                contentElement.classList.remove('active'); // Starts inner content fade out immediately
                console.log('Closing: Removed .active class, starting fade/pad collapse.');
                 setTimeout(() => {
                    contentElement.style.maxHeight = '0px'; // Start container collapse after delay
                     console.log(`Closing: Delayed setting max-height=0 by ${collapseDelay}ms`);
                 }, collapseDelay);
            }
         }

        // --- Event Listeners and Setup ---
        document.addEventListener('DOMContentLoaded', () => {
             console.log("DOM Ready - Tutorial 8");
            const accordionItems = document.querySelectorAll('.accordion-item');
             const slider = document.getElementById('fontSizeSlider');
            const sizeValueSpan = document.getElementById('fontSizeValue');

            // --- Font Size Slider ---
             const handleFontSizeChange = debounce(() => {
                 console.log("Handling font size change..."); typesetMath(); // Retypeset on resize
                 // Adjust height of any open accordion items after font size change
                 accordionItems.forEach(item => {
                    const content = item.querySelector('.accordion-content');
                    if (content.classList.contains('active') && parseFloat(content.style.maxHeight) > 0) {
                         console.log("Adjusting height for open item:", item);
                         // Temporarily disable transitions to avoid jumpy resize
                        const currentTransition = content.style.transition;
                        content.style.transition = 'none';
                        content.style.maxHeight = 'none'; // Allow content to reflow naturally

                        requestAnimationFrame(() => { // Measure after reflow
                            const innerContent = content.querySelector('.content-inner');
                            const scrollHeight = innerContent.offsetHeight;
                            const style = window.getComputedStyle(content);
                            const totalHeight = scrollHeight + parseFloat(style.paddingTop);
                            content.style.maxHeight = totalHeight + 'px'; // Apply new calculated height

                            requestAnimationFrame(() => { // Restore transitions
                                content.style.transition = currentTransition;
                            });
                            console.log("Font Change - Adjusted height to:", totalHeight);
                        });
                     }
                 });
             }, 250); // Debounce typesetting/height adjustment

             slider.addEventListener('input', () => {
                 const newSize = slider.value;
                 document.documentElement.style.setProperty('--base-font-size', newSize + 'px');
                 sizeValueSpan.textContent = newSize + 'px';
                 handleFontSizeChange(); // Call debounced handler
             });

            // --- Accordion Logic ---
            accordionItems.forEach((item, index) => {
                const header = item.querySelector('.accordion-header');
                const content = item.querySelector('.accordion-content');
                const innerContent = content.querySelector('.content-inner');

                // Ratings setup
                const difficultyRatingSpan = header.querySelector('.difficulty-rating');
                const lengthRatingSpan = content.querySelector('.length-rating');
                const complexityRatingSpan = content.querySelector('.complexity-rating');
                // Ensure index is within bounds of questionsData
                if (index < questionsData.length) {
                    const { lengthRating, complexityRating } = questionsData[index];
                    difficultyRatingSpan.innerHTML = generateStars(calculateDifficulty(lengthRating, complexityRating));
                    if (lengthRatingSpan) lengthRatingSpan.innerHTML = generateStars(lengthRating);
                    if (complexityRatingSpan) complexityRatingSpan.innerHTML = generateStars(complexityRating);
                } else {
                    console.warn(`No data found for question index ${index}`);
                }

                 // Cache blocks & hide initially
                 const questionBlock = innerContent.querySelector('.question-block');
                 const ratingsBlock = innerContent.querySelector('.ratings-block');
                 const finalAnswerBlock = innerContent.querySelector('.final-answer-block');
                 const solutionBlock = innerContent.querySelector('.solution-block');
                 [questionBlock, ratingsBlock, finalAnswerBlock, solutionBlock].forEach(el => {
                     if (el) el.classList.add('hidden');
                 });

                 // Click Listener for state transitions
                 item.addEventListener('click', (event) => {
                     // Prevent toggle if click is inside the content area (e.g., selecting text)
                     if (innerContent.contains(event.target)) {
                         console.log("Clicked inside inner content, ignoring toggle.");
                         return;
                     }

                     const currentState = item.getAttribute('data-state');
                     let nextState;

                     // State machine: collapsed -> state1 (Q+R+A) -> state2 (Q+R+S) -> collapsed
                     switch (currentState) {
                         case 'collapsed': nextState = 'state1'; break;
                         case 'state1':    nextState = 'state2'; break;
                         case 'state2':    nextState = 'collapsed'; break;
                         default:          nextState = 'collapsed'; // Fallback
                     }

                     item.setAttribute('data-state', nextState);
                     console.log(`Item ${index + 1} state changed: ${currentState} -> ${nextState}`);

                     // Determine visibility based on the new state
                     const showQ = nextState !== 'collapsed'; // Question visible in state1 & state2
                     const showR = nextState !== 'collapsed'; // Ratings visible in state1 & state2
                     const showA = nextState === 'state1';    // Answer only in state1
                     const showS = nextState === 'state2';    // Solution only in state2

                     // Toggle visibility classes
                     if (questionBlock) questionBlock.classList.toggle('hidden', !showQ);
                     if (ratingsBlock) ratingsBlock.classList.toggle('hidden', !showR);
                     if (finalAnswerBlock) finalAnswerBlock.classList.toggle('hidden', !showA);
                     if (solutionBlock) solutionBlock.classList.toggle('hidden', !showS);

                     // Update Accordion Animation/Height
                     updateAccordion(content, nextState !== 'collapsed');
                });
             });

            // Initial Font Size & Log
            const initialSize = slider.value;
            document.documentElement.style.setProperty('--base-font-size', initialSize + 'px');
            sizeValueSpan.textContent = initialSize + 'px';
            console.log("Initial setup complete.");
            typesetMath(); // Initial typeset after DOM ready

        }); // End DOMContentLoaded

    </script>

</body>
</html>