<!DOCTYPE html>
<html lang="en" style="--base-font-size: 16px;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutorial - 2</title> <!-- Updated Title -->
    <!-- MathJax Configuration -->
    <script>
        MathJax = {
          tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']], processEscapes: true },
          options: { skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'], ignoreHtmlClass: 'tex2jax_ignore', processHtmlClass: 'tex2jax_process' },
          svg: { fontCache: 'global' },
          startup: { ready: () => { console.log('MathJax ready.'); MathJax.startup.defaultReady(); MathJax.startup.promise.then(() => console.log('MathJax initial typeset complete.')); } }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

    <style>
        /* --- START OF FINAL CSS --- */
        :root {
            --accent-color: #F08080;
            --bg-color: #1e1e1e;
            --text-color: #e0e0e0;
            --border-color: #555;
            --header-bg: #2f2f2f;
            --header-hover-bg: #3f3f3f;
            --content-bg: #282828;
            --solution-text-bg: #252525;
            --slider-track-color: #444; /* Dark track for slider */
            --base-font-size: 16px;
            --anim-duration: 0.7s;
            --content-fade-duration: 0.5s;
            --collapse-delay: 0.1s;
            --anim-easing: cubic-bezier(0.65, 0, 0.35, 1);

            /* Star Colors */
            --color-stars-red: #f1948a;
            --color-stars-yellow: #f7dc6f;
            --color-stars-green: #58d68d;
            --color-stars-grey: #777;

            /* Monospace Font Stack */
            --monospace-font-stack: 'SF Mono', 'Consolas', 'Liberation Mono', 'Courier New', monospace;
        }

        body {
            background-color: var(--bg-color); color: var(--text-color);
            font-family: var(--monospace-font-stack); /* Default to monospace */
            line-height: 1.7;
            margin: 0; padding: 20px; font-size: var(--base-font-size);
            transition: font-size 0.2s ease-in-out;
            padding-bottom: 80px; /* Space for slider */
            overflow-x: hidden;
        }
        h1 {
            color: var(--accent-color); text-align: center;
            border-bottom: 3px solid var(--accent-color); padding-bottom: 15px;
            margin-bottom: 30px; font-size: 2.5em;
            /* Inherits monospace */
        }
        .accordion { max-width: 900px; margin: 20px auto; }
        .accordion-item {
            border: 1px solid var(--border-color); border-radius: 8px;
            overflow: hidden; margin-bottom: 25px; background-color: var(--content-bg);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: box-shadow 0.3s ease, border-color 0.3s ease;
        }
         .accordion-item:hover {
            border-color: #777;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }
        .accordion-header {
            background-color: var(--header-bg);
            padding: 18px 25px; cursor: pointer;
            display: flex; justify-content: space-between; align-items: center;
            transition: background-color 0.3s ease, border-color var(--anim-duration) var(--anim-easing);
            border-bottom: 1px solid var(--border-color); position: relative; z-index: 2;
        }
        .accordion-item[data-state="collapsed"] .accordion-header { border-bottom-color: transparent; }
        .accordion-header:hover { background-color: var(--header-hover-bg); }
        .accordion-header h2 {
            margin: 0; font-size: 1.2em; color: var(--text-color);
            /* Inherits monospace */
         }

        /* Content Area & Animations */
        .accordion-content {
            padding: 0 25px; max-height: 0; overflow: hidden;
            transition: max-height var(--anim-duration) var(--anim-easing),
                        padding-top var(--anim-duration) var(--anim-easing),
                        padding-bottom var(--anim-duration) var(--anim-easing);
            box-sizing: border-box; position: relative; z-index: 1;
        }
        .accordion-content.active { padding-top: 20px; }
        .content-inner {
            opacity: 0;
            transform: translateY(15px);
            transition: opacity var(--content-fade-duration) var(--anim-easing) 0s,
                        transform var(--content-fade-duration) var(--anim-easing) 0s;
            will-change: opacity, transform;
            padding-bottom: 25px;
        }
        .accordion-content.active .content-inner {
            opacity: 1;
            transform: translateY(0);
            transition-delay: calc(var(--anim-duration) * 0.3);
            transition-duration: var(--content-fade-duration);
        }

        /* Content Blocks Structure & Styling */
        .question-block, .final-answer-block, .ratings-block, .solution-block {
            margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px dashed var(--border-color);
        }
        .content-inner > div:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
        .ratings-block { margin-bottom: 25px !important; padding-bottom: 20px !important; }

        .question-block strong, .final-answer-block strong, .solution-block strong {
            color: var(--accent-color); display: block; margin-bottom: 8px;
            font-size: 1.1em;
            /* Inherits monospace */
        }
        .question-block p,
        .final-answer-block p {
            font-size: inherit;
            margin: 5px 0 1em 0;
            /* Inherits monospace */
        }
        /* Code block specific styling */
        .question-block pre, .solution-text pre {
            background-color: var(--solution-text-bg); /* Match solution bg */
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 10px 15px;
            overflow-x: auto;
            font-family: var(--monospace-font-stack); /* Ensure monospace */
            font-size: 0.95em; /* Slightly smaller */
            white-space: pre; /* Preserve whitespace */
            margin: 1em 0;
        }
        /* Style for simple tables within pre tags */
        .solution-text table {
            border-collapse: collapse;
            margin: 1em 0;
            font-size: 0.95em; /* Match pre size */
            width: auto; /* Don't force full width */
            border: 1px solid var(--border-color);
        }
        .solution-text th, .solution-text td {
            border: 1px solid var(--border-color);
            padding: 6px 10px;
            text-align: left;
        }
        .solution-text th {
            background-color: var(--header-bg); /* Use header background for table header */
            font-weight: bold;
        }


        .solution-text {
            background-color: var(--solution-text-bg); padding: 15px; border-radius: 5px;
            border: 1px solid #444; color: #ccc; font-size: 1em; line-height: 1.8;
            font-family: var(--monospace-font-stack); /* Explicitly set, inherits anyway */
        }
        .solution-text p, .solution-text li {
            margin-bottom: 1em;
            font-family: inherit; /* Inherit monospace */
        }
        .solution-text *:last-child { margin-bottom: 0; }
        .solution-text ul, .solution-text ol { padding-left: 25px; margin: 0.5em 0 1em 0; }
        .solution-text > strong {
            color: var(--text-color); font-size: 1.05em; margin: 15px 0 10px 0;
            display: block;
            /* Inherits monospace */
        }
        .solution-text > strong:first-of-type { margin-top: 0; }

        /* Star Ratings */
        .stars { font-size: 1.3em; letter-spacing: 3px; display: inline-block;
                 font-family: initial; /* Keep default font for star glyphs */
               }
        .star-filled.green { color: var(--color-stars-green); }
        .star-filled.yellow { color: var(--color-stars-yellow); }
        .star-filled.red { color: var(--color-stars-red); }
        .star-empty { color: var(--color-stars-grey); }
        .rating-label {
            font-weight: bold; color: #bdbdbd; display: inline-block;
            min-width: 140px; vertical-align: middle;
            /* Inherits monospace */
        }
        .ratings-block .stars { vertical-align: middle; }

        /* Utility & MathJax */
        .hidden { display: none; }
        mjx-container {
            font-size: 1.05em; text-align: left !important;
            overflow-x: auto; overflow-y: hidden; padding: 2px 0;
            /* Keep specific math fonts for MathJax */
            font-family: 'Latin Modern Math', 'STIX Two Math', serif;
        }

        /* Font Control - Minimalistic */
        .font-control {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: transparent; /* No background */
            padding: 0px 20px 15px 20px; /* Spacing */
            box-sizing: border-box;
            display: flex;
            align-items: center;
            border-top: none; /* No border */
            z-index: 10;
        }
        #fontSizeSlider {
            flex-grow: 1;
            cursor: pointer;
            margin: 0 15px;
            accent-color: var(--accent-color); /* Styles thumb in modern browsers */
            min-width: 100px;
            height: 6px; /* Track height */
            background: transparent;
            -webkit-appearance: none;
            appearance: none;
        }
        /* Track Styling */
        #fontSizeSlider::-webkit-slider-runnable-track {
            height: 6px;
            background: var(--slider-track-color);
            border-radius: 3px;
        }
        #fontSizeSlider::-moz-range-track {
             height: 6px;
            background: var(--slider-track-color);
            border-radius: 3px;
        }
        /* Thumb Styling */
        #fontSizeSlider::-webkit-slider-thumb {
            -webkit-appearance: none; /* Override default */
            appearance: none;
            margin-top: -5px; /* Vertically center (16px thumb on 6px track) */
            background-color: var(--accent-color);
            height: 16px;
            width: 16px;
            border-radius: 50%; /* Make it round */
            cursor: pointer;
            transition: transform 0.15s ease-in-out; /* Smooth interaction */
        }
        #fontSizeSlider::-moz-range-thumb {
            background-color: var(--accent-color);
            height: 16px;
            width: 16px;
            border-radius: 50%;
            cursor: pointer;
            border: none; /* Remove Firefox border */
            transition: transform 0.15s ease-in-out; /* Smooth interaction */
        }
         /* Optional: Slight scale effect on interaction */
         #fontSizeSlider:active::-webkit-slider-thumb {
             transform: scale(1.1);
         }
         #fontSizeSlider:active::-moz-range-thumb {
            transform: scale(1.1);
         }

        #fontSizeValue {
            min-width: 50px; text-align: right; font-weight: bold;
            color: var(--text-color); font-size: 12px !important;
            /* Inherits monospace */
        }
        /* --- END OF FINAL CSS --- */
    </style>
</head>
<body>

    <h1>Tutorial - 2</h1>

    <div class="accordion">

        <!-- Question 1 -->
        <div class="accordion-item" data-state="collapsed">
            <div class="accordion-header">
                <h2>1. Nonconforming Cans</h2>
                <span class="difficulty-rating"></span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">
                    <div class="question-block hidden">
                        <strong>Question:</strong>
                        <p>A factory uses three production lines to manufacture cans of a certain type. The accompanying table gives percentages of nonconforming cans, categorized by type of nonconformance, for each of the three lines during a particular time period.</p>
                        <pre>
                     Line 1   Line 2   Line 3
Blemish                 15       12       20
Crack                   50       44       40
Pull-Tab Problem        21       28       24
Surface Defect          10        8       15
Other                    4        8        2
                        </pre>
                        <p>(Note: The percentages for Line 3 sum to 101%. Assuming 'Other' for Line 3 should be 1% to make the total 100%).</p>
                        <p>During this period, line 1 produced 500 nonconforming cans, line 2 produced 400 such cans, and line 3 was responsible for 600 nonconforming cans. Suppose that one of these 1500 cans is randomly selected.</p>
                        <p>(a) What is the probability that the can was produced by line 1? That the reason for nonconformance is a crack?<br>
                        (b) If the selected can came from line 1, what is the probability that it had a blemish?<br>
                        (c) Given that the selected can had a surface defect, what is the probability that it came from line 1?</p>
                    </div>
                     <div class="ratings-block hidden">
                        <span class="rating-label">Length Rating:</span> <span class="length-rating"></span><br>
                        <span class="rating-label">Complexity Rating:</span> <span class="complexity-rating"></span>
                    </div>
                    <div class="final-answer-block hidden">
                        <strong>Final Answer:</strong>
                         <p>(a) $P(L1) = 1/3 \approx 0.333$. $P(Crack) = 111/250 = 0.444$.<br>
                         (b) $P(Blemish | L1) = 0.15$.<br>
                         (c) $P(L1 | Surface Defect) = 25/86 \approx 0.2907$.</p>
                    </div>
                    <div class="solution-block hidden">
                        <strong>Full Solution:</strong>
                        <div class="solution-text">
                            <p>First, create a table of counts based on percentages and line totals (L1=500, L2=400, L3=600, Total=1500). Adjusted Line 3 'Other' to 1% (6 cans).</p>
                            <table>
                                <thead>
                                    <tr><th>Defect Type</th><th>Line 1 Counts</th><th>Line 2 Counts</th><th>Line 3 Counts</th><th>Total Defects</th></tr>
                                </thead>
                                <tbody>
                                    <tr><td>Blemish</td><td>75</td><td>48</td><td>120</td><td>243</td></tr>
                                    <tr><td>Crack</td><td>250</td><td>176</td><td>240</td><td>666</td></tr>
                                    <tr><td>Pull-Tab Problem</td><td>105</td><td>112</td><td>144</td><td>361</td></tr>
                                    <tr><td>Surface Defect</td><td>50</td><td>32</td><td>90</td><td>172</td></tr>
                                    <tr><td>Other</td><td>20</td><td>32</td><td>6</td><td>58</td></tr>
                                    <tr><td><strong>Total Cans</strong></td><td><strong>500</strong></td><td><strong>400</strong></td><td><strong>600</strong></td><td><strong>1500</strong></td></tr>
                                </tbody>
                            </table>
                            <p>Let L1, L2, L3 = Line events. Let C = Crack event, B = Blemish, SD = Surface Defect.</p>
                            <strong>(a) P(L1)? P(Crack)?</strong>
                            <p>$P(L1) = \frac{\text{Count(L1)}}{\text{Total}} = \frac{500}{1500} = \frac{1}{3} \approx 0.333$.<br>
                            $P(C) = \frac{\text{Count(Crack)}}{\text{Total}} = \frac{666}{1500} = \frac{111}{250} = 0.444$.</p>
                            <strong>(b) P(Blemish | L1)?</strong>
                            <p>$P(B | L1) = \frac{\text{Count(B and L1)}}{\text{Count(L1)}} = \frac{75}{500} = 0.15$. (Also directly from the % table).</p>
                            <strong>(c) P(L1 | Surface Defect)?</strong>
                            <p>$P(L1 | SD) = \frac{P(L1 \cap SD)}{P(SD)} = \frac{\text{Count(L1 and SD)} / \text{Total}}{\text{Count(SD)} / \text{Total}}$<br>
                            $= \frac{\text{Count(L1 and SD)}}{\text{Count(SD)}} = \frac{50}{172} = \frac{25}{86} \approx 0.2907$.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question 2 -->
        <div class="accordion-item" data-state="collapsed">
            <div class="accordion-header">
                <h2>2. Satellite Launch Schedule</h2>
                <span class="difficulty-rating"></span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">
                    <div class="question-block hidden">
                        <strong>Question:</strong>
                        <p>One satellite is scheduled to be launched from Cape Canaveral in Florida, and another launching is scheduled for Vandenberg Air Force Base in California. Let A denote the event that the Vandenberg launch goes off on schedule, and let B represent the event that the Cape Canaveral launch goes off on schedule. If A and B are independent events with P(A) > P(B), P(A U B) = 0.626, and P(A ∩ B) = 0.144, determine the values of P(A) and P(B).</p>
                    </div>
                     <div class="ratings-block hidden">
                        <span class="rating-label">Length Rating:</span> <span class="length-rating"></span><br>
                        <span class="rating-label">Complexity Rating:</span> <span class="complexity-rating"></span>
                    </div>
                    <div class="final-answer-block hidden">
                        <strong>Final Answer:</strong>
                        <p>$P(A) = 0.45$ and $P(B) = 0.32$.</p>
                    </div>
                    <div class="solution-block hidden">
                        <strong>Full Solution:</strong>
                        <div class="solution-text">
                            <p>Given: A, B independent, $P(A) > P(B)$, $P(A \cup B) = 0.626$, $P(A \cap B) = 0.144$.</p>
                            <p>From independence: $P(A \cap B) = P(A) P(B)$. So, $P(A) P(B) = 0.144$.</p>
                            <p>From union formula: $P(A \cup B) = P(A) + P(B) - P(A \cap B)$.<br>
                            $0.626 = P(A) + P(B) - 0.144$<br>
                            $P(A) + P(B) = 0.626 + 0.144 = 0.770$.</p>
                            <p>Let $x = P(A), y = P(B)$. We have the system:<br>
                            (i) $xy = 0.144$<br>
                            (ii) $x + y = 0.770$</p>
                            <p>From (ii), $y = 0.770 - x$. Substitute into (i):<br>
                            $x(0.770 - x) = 0.144$<br>
                            $0.770x - x^2 = 0.144$<br>
                            $x^2 - 0.770x + 0.144 = 0$.</p>
                            <p>Using quadratic formula: $x = \frac{0.770 \pm \sqrt{(-0.770)^2 - 4(1)(0.144)}}{2}$<br>
                            $x = \frac{0.770 \pm \sqrt{0.5929 - 0.576}}{2} = \frac{0.770 \pm \sqrt{0.0169}}{2} = \frac{0.770 \pm 0.130}{2}$.</p>
                            <p>Two solutions:<br>
                            1) $x = (0.770 + 0.130)/2 = 0.45 \implies y = 0.770 - 0.45 = 0.32$. So $P(A)=0.45, P(B)=0.32$.<br>
                            2) $x = (0.770 - 0.130)/2 = 0.32 \implies y = 0.770 - 0.32 = 0.45$. So $P(A)=0.32, P(B)=0.45$.</p>
                            <p>Since we are given $P(A) > P(B)$, we choose solution 1.</p>
                            <p>Therefore, $P(A) = 0.45$ and $P(B) = 0.32$.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question 3 -->
        <div class="accordion-item" data-state="collapsed">
            <div class="accordion-header">
                <h2>3. Impurity Detection (Bayes)</h2>
                <span class="difficulty-rating"></span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">
                    <div class="question-block hidden">
                        <strong>Question:</strong>
                        <p>A chemical engineer is interested in determining whether a certain trace impurity is present in a product. An experiment has a probability of 0.80 of detecting the impurity if it is present. The probability of not detecting the impurity if it is absent is 0.90. The prior probabilities of the impurity being present and being absent are 0.40 and 0.60, respectively. Three separate experiments result in only two detections. What is the posterior probability that the impurity is present?</p>
                    </div>
                     <div class="ratings-block hidden">
                        <span class="rating-label">Length Rating:</span> <span class="length-rating"></span><br>
                        <span class="rating-label">Complexity Rating:</span> <span class="complexity-rating"></span>
                    </div>
                    <div class="final-answer-block hidden">
                        <strong>Final Answer:</strong>
                        <p>The posterior probability that the impurity is present is $256/283 \approx 0.9046$.</p>
                    </div>
                    <div class="solution-block hidden">
                        <strong>Full Solution:</strong>
                        <div class="solution-text">
                            <p>Let I = Impurity present, I' = Impurity absent.<br>
                            Let D = Detection in one experiment.<br>
                            Let E = Exactly 2 detections in 3 experiments.</p>
                            <p>Given:<br>
                            $P(I) = 0.40$, $P(I') = 0.60$<br>
                            $P(D|I) = 0.80$<br>
                            $P(D'|I') = 0.90 \implies P(D|I') = 1 - 0.90 = 0.10$.</p>
                            <p>We want $P(I | E)$. Using Bayes' Theorem: $P(I | E) = \frac{P(E | I) P(I)}{P(E)}$.</p>
                            <p>Calculate conditional probabilities of E (Binomial):<br>
                            $P(E | I)$: $n=3, k=2, p=P(D|I)=0.8$.<br>
                            $P(E | I) = \binom{3}{2} (0.8)^2 (0.2)^1 = 3(0.64)(0.2) = 0.384$.<br>
                            $P(E | I')$: $n=3, k=2, p'=P(D|I')=0.1$.<br>
                            $P(E | I') = \binom{3}{2} (0.1)^2 (0.9)^1 = 3(0.01)(0.9) = 0.027$.</p>
                            <p>Calculate total probability of E:<br>
                            $P(E) = P(E | I) P(I) + P(E | I') P(I')$<br>
                            $P(E) = (0.384)(0.40) + (0.027)(0.60) = 0.1536 + 0.0162 = 0.1698$.</p>
                            <p>Apply Bayes' Theorem:<br>
                            $P(I | E) = \frac{P(E | I) P(I)}{P(E)} = \frac{(0.384)(0.40)}{0.1698} = \frac{0.1536}{0.1698}$<br>
                            $P(I | E) = \frac{1536}{1698} = \frac{256}{283} \approx 0.9046$.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question 4 -->
        <div class="accordion-item" data-state="collapsed">
            <div class="accordion-header">
                <h2>4. Fastener Inspection</h2>
                <span class="difficulty-rating"></span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">
                    <div class="question-block hidden">
                        <strong>Question:</strong>
                        <p>Fasteners used in aircraft manufacturing are slightly crimped so that they lock enough to avoid loosening during vibration. Suppose that 95% of all fasteners pass an initial inspection. Of the 5% that fail, 20% are so seriously defective that they must be scrapped. The remaining fasteners are sent to a recrimping operation, where 40% cannot be salvaged and are discarded. The other 60% of these fasteners are corrected by the recrimping process and subsequently pass inspection.<br>
                        (a) What is the probability that a randomly selected incoming fastener will pass inspection either initially or after recrimping?<br>
                        (b) Given that a fastener passed inspection, what is the probability that it passed the initial inspection and did not need recrimping?</p>
                    </div>
                     <div class="ratings-block hidden">
                        <span class="rating-label">Length Rating:</span> <span class="length-rating"></span><br>
                        <span class="rating-label">Complexity Rating:</span> <span class="complexity-rating"></span>
                    </div>
                    <div class="final-answer-block hidden">
                        <strong>Final Answer:</strong>
                        <p>(a) P(Pass Finally) = 0.974<br>
                        (b) P(Passed Initial | Passed Finally) ≈ 0.9754</p>
                    </div>
                    <div class="solution-block hidden">
                        <strong>Full Solution:</strong>
                        <div class="solution-text">
                            <p>Let PI=Pass Initial, FI=Fail Initial, S=Scrapped, R=Recrimp, NS=Not Salvaged, C=Corrected, PF=Pass Finally.</p>
                            <p>Given:<br>
                            P(PI) = 0.95 $\implies$ P(FI) = 0.05<br>
                            P(S | FI) = 0.20 $\implies$ P(R | FI) = 0.80<br>
                            P(NS | R) = 0.40 $\implies$ P(C | R) = 0.60</p>
                            <strong>(a) Probability passing finally, P(PF).</strong>
                            <p>PF = PI $\cup$ (FI $\cap$ R $\cap$ C)<br>
                            These events are disjoint.<br>
                            P(PF) = P(PI) + P(FI $\cap$ R $\cap$ C)<br>
                            P(FI $\cap$ R $\cap$ C) = P(C | R $\cap$ FI) P(R | FI) P(FI)<br>
                            Assuming C depends only on R: P(FI $\cap$ R $\cap$ C) = P(C | R) P(R | FI) P(FI)<br>
                            $= (0.60)(0.80)(0.05) = 0.024$.<br>
                            P(PF) = 0.95 + 0.024 = 0.974$.</p>
                            <strong>(b) P(PI | PF)?</strong>
                            <p>$P(PI | PF) = \frac{P(PI \cap PF)}{P(PF)}$.<br>
                            If PI occurs, then PF must occur. So $PI \cap PF = PI$.<br>
                            $P(PI | PF) = \frac{P(PI)}{P(PF)} = \frac{0.95}{0.974} = \frac{950}{974} = \frac{475}{487} \approx 0.9754$.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question 5 -->
        <div class="accordion-item" data-state="collapsed">
            <div class="accordion-header">
                <h2>5. System Components</h2>
                <span class="difficulty-rating"></span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">
                    <div class="question-block hidden">
                        <strong>Question:</strong>
                        <p>A system consists of two components. The probability that the second component functions in a satisfactory manner during its design life is 0.9, the probability that at least one of the two components does so is 0.96, and the probability that both components do so is 0.75. Given that the first component functions in a satisfactory manner throughout its design life, what is the probability that the second one does also?</p>
                    </div>
                     <div class="ratings-block hidden">
                        <span class="rating-label">Length Rating:</span> <span class="length-rating"></span><br>
                        <span class="rating-label">Complexity Rating:</span> <span class="complexity-rating"></span>
                    </div>
                    <div class="final-answer-block hidden">
                        <strong>Final Answer:</strong>
                        <p>The probability is $25/27 \approx 0.9259$.</p>
                    </div>
                    <div class="solution-block hidden">
                        <strong>Full Solution:</strong>
                        <div class="solution-text">
                            <p>Let C1 = Component 1 functions, C2 = Component 2 functions.</p>
                            <p>Given:<br>
                            $P(C2) = 0.9$<br>
                            $P(C1 \cup C2) = 0.96$<br>
                            $P(C1 \cap C2) = 0.75$</p>
                            <p>We want $P(C2 | C1)$. Formula: $P(C2 | C1) = \frac{P(C1 \cap C2)}{P(C1)}$.</p>
                            <p>Find $P(C1)$ using the union formula:<br>
                            $P(C1 \cup C2) = P(C1) + P(C2) - P(C1 \cap C2)$<br>
                            $0.96 = P(C1) + 0.9 - 0.75$<br>
                            $0.96 = P(C1) + 0.15$<br>
                            $P(C1) = 0.96 - 0.15 = 0.81$.</p>
                            <p>Now calculate the conditional probability:<br>
                            $P(C2 | C1) = \frac{0.75}{0.81} = \frac{75}{81} = \frac{25}{27} \approx 0.9259$.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question 6 -->
        <div class="accordion-item" data-state="collapsed">
            <div class="accordion-header">
                <h2>6. Birthday Problem</h2>
                <span class="difficulty-rating"></span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">
                    <div class="question-block hidden">
                        <strong>Question:</strong>
                        <p>Disregarding the possibility of a February 29 birthday, suppose a randomly selected individual is equally likely to have been born on any one of the other 365 days.<br>
                        (a) If ten people are randomly selected, what is the probability that all have different birthdays? That at least two have the same birthday?<br>
                        (b) With k replacing ten in part (a), what is the smallest k for which there is at least a 50-50 chance that two or more people will have the same birthday?</p>
                    </div>
                     <div class="ratings-block hidden">
                        <span class="rating-label">Length Rating:</span> <span class="length-rating"></span><br>
                        <span class="rating-label">Complexity Rating:</span> <span class="complexity-rating"></span>
                    </div>
                    <div class="final-answer-block hidden">
                        <strong>Final Answer:</strong>
                        <p>(a) P(all different) $\approx 0.883$. P(at least two same) $\approx 0.117$.<br>
                        (b) The smallest k is 23.</p>
                    </div>
                    <div class="solution-block hidden">
                        <strong>Full Solution:</strong>
                        <div class="solution-text">
                            <p>N=365 days. Assume independence and equal likelihood.</p>
                            <strong>(a) n = 10 people.</strong>
                            <p>P(all different) = $\frac{\text{Ways to choose 10 different birthdays}}{\text{Total ways for 10 birthdays}} = \frac{P_{10, 365}}{365^{10}}$<br>
                            $= \frac{365 \times 364 \times \dots \times 356}{365^{10}}$<br>
                            $= \frac{365}{365} \times \frac{364}{365} \times \dots \times \frac{356}{365} \approx 0.88305$.</p>
                            <p>P(at least two same) = $1 - P(\text{all different})$<br>
                            $\approx 1 - 0.88305 = 0.11695$.</p>
                            <strong>(b) Smallest k for P(at least two same) ≥ 0.5.</strong>
                            <p>We need the smallest k such that $P(\text{all different for k people}) \le 0.5$.<br>
                            $P_k = \frac{365 \times 364 \times \dots \times (365-k+1)}{365^k}$.<br>
                            Test values:<br>
                            k=20: $P_{20} \approx 0.589$<br>
                            k=21: $P_{21} \approx 0.556$<br>
                            k=22: $P_{22} \approx 0.524$<br>
                            k=23: $P_{23} \approx 0.493$<br>
                            The probability first drops below or equals 0.5 when k=23.</p>
                            <p>The smallest k is 23.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div> <!-- end accordion -->

    <!-- Font Size Slider -->
    <div class="font-control">
        <input type="range" id="fontSizeSlider" min="10" max="50" value="16" step="1">
        <span id="fontSizeValue">16px</span>
    </div>

    <!-- JavaScript -->
    <script>
        // --- Data for Ratings (Tutorial 2) ---
        const questionsData = [
            { lengthRating: 4, complexityRating: 2 }, // Q1
            { lengthRating: 3, complexityRating: 2 }, // Q2
            { lengthRating: 4, complexityRating: 3 }, // Q3
            { lengthRating: 4, complexityRating: 3 }, // Q4
            { lengthRating: 2, complexityRating: 1 }, // Q5
            { lengthRating: 4, complexityRating: 2 }  // Q6
        ];

        // --- Utility Functions ---
        function generateStars(rating) { const roundedRating = Math.max(1, Math.min(5, Math.round(rating))); let colorClass; if (roundedRating <= 2) { colorClass = 'green'; } else if (roundedRating === 3) { colorClass = 'yellow'; } else { colorClass = 'red'; } let starsHTML = '<span class="stars">'; for (let i = 1; i <= 5; i++) { starsHTML += `<span class="star-${i <= roundedRating ? 'filled ' + colorClass : 'empty'}">${i <= roundedRating ? '★' : '☆'}</span>`; } starsHTML += '</span>'; return starsHTML; }
        function calculateDifficulty(lengthRating, complexityRating) { const avg = (lengthRating + complexityRating) / 2; return Math.max(1, Math.min(5, Math.round(avg))); }
        function debounce(func, wait) { let timeout; return function executedFunction(...args) { const later = () => { clearTimeout(timeout); func(...args); }; clearTimeout(timeout); timeout = setTimeout(later, wait); }; }
        const mathJaxLoadedPromise = new Promise((resolve) => { if (window.MathJax && window.MathJax.startup) { window.MathJax.startup.promise.then(resolve); } else { window.addEventListener('MathJaxLoaded', resolve, {once: true}); } }); if (document.readyState === "complete" || document.readyState === "interactive") { if(window.MathJax && window.MathJax.startup) window.dispatchEvent(new Event('MathJaxLoaded')); } else { window.addEventListener('load', () => { if(window.MathJax && window.MathJax.startup) window.dispatchEvent(new Event('MathJaxLoaded')); }); }
        function typesetMath(elements = [document.body]) { console.log("Attempting to typeset math in:", elements); mathJaxLoadedPromise.then(() => { console.log("MathJax confirmed ready, calling typesetPromise."); return MathJax.typesetPromise(elements); }).then(() => { console.log("MathJax typesetting complete for:", elements); }).catch(err => console.error('MathJax Typesetting Error:', err)); }

        // --- Accordion Update Function ---
         function updateAccordion(contentElement, makeActive) {
            if (!contentElement) return;
            const innerContent = contentElement.querySelector('.content-inner');
            const collapseDelay = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--collapse-delay') || '0.1') * 1000; // Read from CSS var

             if (makeActive) {
                 // EXPANDING
                 contentElement.classList.add('active');
                 typesetMath([innerContent]);
                 requestAnimationFrame(() => { // Ensure DOM update before measurement
                    const currentTransition = contentElement.style.transition;
                     contentElement.style.transition = 'none'; // Temporarily disable transitions for height calculation
                    const scrollHeight = innerContent.offsetHeight;
                    const style = window.getComputedStyle(contentElement);
                    const totalHeight = scrollHeight + parseFloat(style.paddingTop);
                     contentElement.style.maxHeight = totalHeight + "px"; // Set target height
                    console.log(`Expanding: Calculated totalHeight = ${totalHeight}px`);
                     requestAnimationFrame(() => { // Re-enable transitions after height is set
                         contentElement.style.transition = currentTransition;
                     });
                });
            } else {
                 // CLOSING
                contentElement.classList.remove('active'); // Starts inner content fade out immediately
                console.log('Closing: Removed .active class, starting fade/pad collapse.');
                 setTimeout(() => {
                    contentElement.style.maxHeight = '0px'; // Start container collapse after delay
                     console.log(`Closing: Delayed setting max-height=0 by ${collapseDelay}ms`);
                 }, collapseDelay);
            }
         }

        // --- Event Listeners and Setup ---
        document.addEventListener('DOMContentLoaded', () => {
             console.log("DOM Ready - Tutorial 2");
            const accordionItems = document.querySelectorAll('.accordion-item');
             const slider = document.getElementById('fontSizeSlider');
            const sizeValueSpan = document.getElementById('fontSizeValue');

            // --- Font Size Slider ---
             const handleFontSizeChange = debounce(() => {
                 console.log("Handling font size change..."); typesetMath(); // Retypeset on resize
                 // Adjust height of any open accordion items after font size change
                 accordionItems.forEach(item => {
                    const content = item.querySelector('.accordion-content');
                    if (content.classList.contains('active') && parseFloat(content.style.maxHeight) > 0) {
                         console.log("Adjusting height for open item:", item);
                         // Temporarily disable transitions to avoid jumpy resize
                        const currentTransition = content.style.transition;
                        content.style.transition = 'none';
                        content.style.maxHeight = 'none'; // Allow content to reflow naturally

                        requestAnimationFrame(() => { // Measure after reflow
                            const innerContent = content.querySelector('.content-inner');
                            const scrollHeight = innerContent.offsetHeight;
                            const style = window.getComputedStyle(content);
                            const totalHeight = scrollHeight + parseFloat(style.paddingTop);
                            content.style.maxHeight = totalHeight + 'px'; // Apply new calculated height

                            requestAnimationFrame(() => { // Restore transitions
                                content.style.transition = currentTransition;
                            });
                            console.log("Font Change - Adjusted height to:", totalHeight);
                        });
                     }
                 });
             }, 250); // Debounce typesetting/height adjustment

             slider.addEventListener('input', () => {
                 const newSize = slider.value;
                 document.documentElement.style.setProperty('--base-font-size', newSize + 'px');
                 sizeValueSpan.textContent = newSize + 'px';
                 handleFontSizeChange(); // Call debounced handler
             });

            // --- Accordion Logic ---
            accordionItems.forEach((item, index) => {
                const header = item.querySelector('.accordion-header');
                const content = item.querySelector('.accordion-content');
                const innerContent = content.querySelector('.content-inner');

                // Ratings setup
                const difficultyRatingSpan = header.querySelector('.difficulty-rating');
                const lengthRatingSpan = content.querySelector('.length-rating');
                const complexityRatingSpan = content.querySelector('.complexity-rating');
                // Ensure index is within bounds of questionsData
                if (index < questionsData.length) {
                    const { lengthRating, complexityRating } = questionsData[index];
                    difficultyRatingSpan.innerHTML = generateStars(calculateDifficulty(lengthRating, complexityRating));
                    if (lengthRatingSpan) lengthRatingSpan.innerHTML = generateStars(lengthRating);
                    if (complexityRatingSpan) complexityRatingSpan.innerHTML = generateStars(complexityRating);
                } else {
                    console.warn(`No data found for question index ${index}`);
                }

                 // Cache blocks & hide initially
                 const questionBlock = innerContent.querySelector('.question-block');
                 const ratingsBlock = innerContent.querySelector('.ratings-block');
                 const finalAnswerBlock = innerContent.querySelector('.final-answer-block');
                 const solutionBlock = innerContent.querySelector('.solution-block');
                 [questionBlock, ratingsBlock, finalAnswerBlock, solutionBlock].forEach(el => {
                     if (el) el.classList.add('hidden');
                 });

                 // Click Listener for state transitions
                 item.addEventListener('click', (event) => {
                     // Prevent toggle if click is inside the content area (e.g., selecting text)
                     if (innerContent.contains(event.target)) {
                         console.log("Clicked inside inner content, ignoring toggle.");
                         return;
                     }

                     const currentState = item.getAttribute('data-state');
                     let nextState;

                     // State machine: collapsed -> state1 (Q+R+A) -> state2 (Q+R+S) -> collapsed
                     switch (currentState) {
                         case 'collapsed': nextState = 'state1'; break;
                         case 'state1':    nextState = 'state2'; break;
                         case 'state2':    nextState = 'collapsed'; break;
                         default:          nextState = 'collapsed'; // Fallback
                     }

                     item.setAttribute('data-state', nextState);
                     console.log(`Item ${index + 1} state changed: ${currentState} -> ${nextState}`);

                     // Determine visibility based on the new state
                     const showQ = nextState !== 'collapsed'; // Question visible in state1 & state2
                     const showR = nextState !== 'collapsed'; // Ratings visible in state1 & state2
                     const showA = nextState === 'state1';    // Answer only in state1
                     const showS = nextState === 'state2';    // Solution only in state2

                     // Toggle visibility classes
                     if (questionBlock) questionBlock.classList.toggle('hidden', !showQ);
                     if (ratingsBlock) ratingsBlock.classList.toggle('hidden', !showR);
                     if (finalAnswerBlock) finalAnswerBlock.classList.toggle('hidden', !showA);
                     if (solutionBlock) solutionBlock.classList.toggle('hidden', !showS);

                     // Update Accordion Animation/Height
                     updateAccordion(content, nextState !== 'collapsed');
                });
             });

            // Initial Font Size & Log
            const initialSize = slider.value;
            document.documentElement.style.setProperty('--base-font-size', initialSize + 'px');
            sizeValueSpan.textContent = initialSize + 'px';
            console.log("Initial setup complete.");
            typesetMath(); // Initial typeset after DOM ready

        }); // End DOMContentLoaded

    </script>

</body>
</html>