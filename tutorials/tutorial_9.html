<!DOCTYPE html>
<html lang="en" style="--base-font-size: 16px;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutorial - 9</title> <!-- Updated Title -->
    <!-- MathJax Configuration -->
    <script>
        MathJax = {
          tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']], processEscapes: true },
          options: { skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'], ignoreHtmlClass: 'tex2jax_ignore', processHtmlClass: 'tex2jax_process' },
          svg: { fontCache: 'global' },
          startup: { ready: () => { console.log('MathJax ready.'); MathJax.startup.defaultReady(); MathJax.startup.promise.then(() => console.log('MathJax initial typeset complete.')); } }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

    <style>
        /* --- START OF FINAL CSS --- */
        :root {
            --accent-color: #F08080;
            --bg-color: #1e1e1e;
            --text-color: #e0e0e0;
            --border-color: #555;
            --header-bg: #2f2f2f;
            --header-hover-bg: #3f3f3f;
            --content-bg: #282828;
            --solution-text-bg: #252525;
            --slider-track-color: #444; /* Dark track for slider */
            --base-font-size: 16px;
            --anim-duration: 0.7s;
            --content-fade-duration: 0.5s;
            --collapse-delay: 0.1s;
            --anim-easing: cubic-bezier(0.65, 0, 0.35, 1);

            /* Star Colors */
            --color-stars-red: #f1948a;
            --color-stars-yellow: #f7dc6f;
            --color-stars-green: #58d68d;
            --color-stars-grey: #777;

            /* Monospace Font Stack */
            --monospace-font-stack: 'SF Mono', 'Consolas', 'Liberation Mono', 'Courier New', monospace;
        }

        body {
            background-color: var(--bg-color); color: var(--text-color);
            font-family: var(--monospace-font-stack); /* Default to monospace */
            line-height: 1.7;
            margin: 0; padding: 20px; font-size: var(--base-font-size);
            transition: font-size 0.2s ease-in-out;
            padding-bottom: 80px; /* Space for slider */
            overflow-x: hidden;
        }
        h1 {
            color: var(--accent-color); text-align: center;
            border-bottom: 3px solid var(--accent-color); padding-bottom: 15px;
            margin-bottom: 30px; font-size: 2.5em;
            /* Inherits monospace */
        }
        .accordion { max-width: 900px; margin: 20px auto; }
        .accordion-item {
            border: 1px solid var(--border-color); border-radius: 8px;
            overflow: hidden; margin-bottom: 25px; background-color: var(--content-bg);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: box-shadow 0.3s ease, border-color 0.3s ease;
        }
         .accordion-item:hover {
            border-color: #777;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }
        .accordion-header {
            background-color: var(--header-bg);
            padding: 18px 25px; cursor: pointer;
            display: flex; justify-content: space-between; align-items: center;
            transition: background-color 0.3s ease, border-color var(--anim-duration) var(--anim-easing);
            border-bottom: 1px solid var(--border-color); position: relative; z-index: 2;
        }
        .accordion-item[data-state="collapsed"] .accordion-header { border-bottom-color: transparent; }
        .accordion-header:hover { background-color: var(--header-hover-bg); }
        .accordion-header h2 {
            margin: 0; font-size: 1.2em; color: var(--text-color);
            /* Inherits monospace */
         }

        /* Content Area & Animations */
        .accordion-content {
            padding: 0 25px; max-height: 0; overflow: hidden;
            transition: max-height var(--anim-duration) var(--anim-easing),
                        padding-top var(--anim-duration) var(--anim-easing),
                        padding-bottom var(--anim-duration) var(--anim-easing);
            box-sizing: border-box; position: relative; z-index: 1;
        }
        .accordion-content.active { padding-top: 20px; }
        .content-inner {
            opacity: 0;
            transform: translateY(15px);
            transition: opacity var(--content-fade-duration) var(--anim-easing) 0s,
                        transform var(--content-fade-duration) var(--anim-easing) 0s;
            will-change: opacity, transform;
            padding-bottom: 25px;
        }
        .accordion-content.active .content-inner {
            opacity: 1;
            transform: translateY(0);
            transition-delay: calc(var(--anim-duration) * 0.3);
            transition-duration: var(--content-fade-duration);
        }

        /* Content Blocks Structure & Styling */
        .question-block, .final-answer-block, .ratings-block, .solution-block {
            margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px dashed var(--border-color);
        }
        .content-inner > div:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
        .ratings-block { margin-bottom: 25px !important; padding-bottom: 20px !important; }

        .question-block strong, .final-answer-block strong, .solution-block strong {
            color: var(--accent-color); display: block; margin-bottom: 8px;
            font-size: 1.1em;
            /* Inherits monospace */
        }
        .question-block p,
        .final-answer-block p {
            font-size: inherit;
            margin: 5px 0 1em 0;
            /* Inherits monospace */
        }
        /* Code block specific styling */
        .question-block pre, .solution-text pre {
            background-color: var(--solution-text-bg); /* Match solution bg */
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 10px 15px;
            overflow-x: auto;
            font-family: var(--monospace-font-stack); /* Ensure monospace */
            font-size: 0.95em; /* Slightly smaller */
            white-space: pre; /* Preserve whitespace */
            margin: 1em 0;
        }

        .solution-text {
            background-color: var(--solution-text-bg); padding: 15px; border-radius: 5px;
            border: 1px solid #444; color: #ccc; font-size: 1em; line-height: 1.8;
            font-family: var(--monospace-font-stack); /* Explicitly set, inherits anyway */
        }
        .solution-text p, .solution-text li {
            margin-bottom: 1em;
            font-family: inherit; /* Inherit monospace */
        }
        .solution-text *:last-child { margin-bottom: 0; }
        .solution-text ul, .solution-text ol { padding-left: 25px; margin: 0.5em 0 1em 0; }
        .solution-text > strong {
            color: var(--text-color); font-size: 1.05em; margin: 15px 0 10px 0;
            display: block;
            /* Inherits monospace */
        }
        .solution-text > strong:first-of-type { margin-top: 0; }

        /* Star Ratings */
        .stars { font-size: 1.3em; letter-spacing: 3px; display: inline-block;
                 font-family: initial; /* Keep default font for star glyphs */
               }
        .star-filled.green { color: var(--color-stars-green); }
        .star-filled.yellow { color: var(--color-stars-yellow); }
        .star-filled.red { color: var(--color-stars-red); }
        .star-empty { color: var(--color-stars-grey); }
        .rating-label {
            font-weight: bold; color: #bdbdbd; display: inline-block;
            min-width: 140px; vertical-align: middle;
            /* Inherits monospace */
        }
        .ratings-block .stars { vertical-align: middle; }

        /* Utility & MathJax */
        .hidden { display: none; }
        mjx-container {
            font-size: 1.05em; text-align: left !important;
            overflow-x: auto; overflow-y: hidden; padding: 2px 0;
            /* Keep specific math fonts for MathJax */
            font-family: 'Latin Modern Math', 'STIX Two Math', serif;
        }

        /* Font Control - Minimalistic */
        .font-control {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: transparent; /* No background */
            padding: 0px 20px 15px 20px; /* Spacing */
            box-sizing: border-box;
            display: flex;
            align-items: center;
            border-top: none; /* No border */
            z-index: 10;
        }
        #fontSizeSlider {
            flex-grow: 1;
            cursor: pointer;
            margin: 0 15px;
            accent-color: var(--accent-color); /* Styles thumb in modern browsers */
            min-width: 100px;
            height: 6px; /* Track height */
            background: transparent;
            -webkit-appearance: none;
            appearance: none;
        }
        /* Track Styling */
        #fontSizeSlider::-webkit-slider-runnable-track {
            height: 6px;
            background: var(--slider-track-color);
            border-radius: 3px;
        }
        #fontSizeSlider::-moz-range-track {
             height: 6px;
            background: var(--slider-track-color);
            border-radius: 3px;
        }
        /* Thumb Styling */
        #fontSizeSlider::-webkit-slider-thumb {
            -webkit-appearance: none; /* Override default */
            appearance: none;
            margin-top: -5px; /* Vertically center (16px thumb on 6px track) */
            background-color: var(--accent-color);
            height: 16px;
            width: 16px;
            border-radius: 50%; /* Make it round */
            cursor: pointer;
            transition: transform 0.15s ease-in-out; /* Smooth interaction */
        }
        #fontSizeSlider::-moz-range-thumb {
            background-color: var(--accent-color);
            height: 16px;
            width: 16px;
            border-radius: 50%;
            cursor: pointer;
            border: none; /* Remove Firefox border */
            transition: transform 0.15s ease-in-out; /* Smooth interaction */
        }
         /* Optional: Slight scale effect on interaction */
         #fontSizeSlider:active::-webkit-slider-thumb {
             transform: scale(1.1);
         }
         #fontSizeSlider:active::-moz-range-thumb {
            transform: scale(1.1);
         }

        #fontSizeValue {
            min-width: 50px; text-align: right; font-weight: bold;
            color: var(--text-color); font-size: 12px !important;
            /* Inherits monospace */
        }
        /* --- END OF FINAL CSS --- */
    </style>
</head>
<body>

    <h1>Tutorial - 9</h1>

    <div class="accordion">

        <!-- Question 1 -->
        <div class="accordion-item" data-state="collapsed">
            <div class="accordion-header">
                <h2>1. Service Station Hoses (Joint PMF)</h2>
                <span class="difficulty-rating"></span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">
                    <div class="question-block hidden">
                        <strong>Question:</strong>
                        <p>A service station has both self-service and full-service islands. On each island, there is a single regular unleaded pump with two hoses. Let X denote the number of hoses being used on the self-service island at a particular time, and let Y denote the number of hoses on the full-service island in use at that time. The joint pmf of X and Y appears in the accompanying tabulation.</p>
                        <pre>
      p(x, y) |  y=0 |  y=1 |  y=2
      -----------------------------
      x=0     |  .10 |  .04 |  .02
      x=1     |  .08 |  .20 |  .06
      x=2     |  .06 |  .14 |  .30
                        </pre>
                        <p>a. What is P(X = 1 and Y = 1)?<br>
                        b. Compute P(X ≤ 1 and Y ≤ 1).<br>
                        c. Compute the probability of {X ≠ 0 and Y ≠ 0}.<br>
                        d. Compute the marginal pmf of X and of Y. Using pX(x), what is P(X ≤ 1)?<br>
                        e. Are X and Y independent rv's? Explain.</p>
                    </div>
                     <div class="ratings-block hidden">
                        <span class="rating-label">Length Rating:</span> <span class="length-rating"></span><br>
                        <span class="rating-label">Complexity Rating:</span> <span class="complexity-rating"></span>
                    </div>
                    <div class="final-answer-block hidden">
                        <strong>Final Answer:</strong>
                        <p>a. $P(X=1, Y=1) = 0.20$<br>
                        b. $P(X \le 1, Y \le 1) = 0.42$<br>
                        c. $P(X \neq 0, Y \neq 0) = 0.70$<br>
                        d. $p_X(0)=0.16, p_X(1)=0.34, p_X(2)=0.50$. $p_Y(0)=0.24, p_Y(1)=0.38, p_Y(2)=0.38$. $P(X \le 1) = 0.50$<br>
                        e. No, X and Y are not independent (e.g., $p(0,0) \neq p_X(0)p_Y(0)$).</p>
                    </div>
                    <div class="solution-block hidden">
                        <strong>Full Solution:</strong>
                        <div class="solution-text">
                            <strong>a. P(X = 1 and Y = 1)?</strong>
                            <p>Read $p(1, 1)$ from the table: $P(X=1, Y=1) = 0.20$.</p>
                            <strong>b. Compute P(X ≤ 1 and Y ≤ 1).</strong>
                            <p>Sum probabilities where $x \in \{0, 1\}$ and $y \in \{0, 1\}$:<br>
                            $P(X \le 1, Y \le 1) = p(0, 0) + p(0, 1) + p(1, 0) + p(1, 1)$<br>
                            $= 0.10 + 0.04 + 0.08 + 0.20 = 0.42$.</p>
                            <strong>c. Compute the probability of {X ≠ 0 and Y ≠ 0}.</strong>
                            <p>Sum probabilities where $x \in \{1, 2\}$ and $y \in \{1, 2\}$:<br>
                            $P(X \neq 0, Y \neq 0) = p(1, 1) + p(1, 2) + p(2, 1) + p(2, 2)$<br>
                            $= 0.20 + 0.06 + 0.14 + 0.30 = 0.70$.</p>
                            <strong>d. Compute the marginal pmf of X and of Y. Using pX(x), what is P(X ≤ 1)?</strong>
                            <p>Marginal pmf of X (sum rows):<br>
                            $p_X(0) = 0.10 + 0.04 + 0.02 = 0.16$<br>
                            $p_X(1) = 0.08 + 0.20 + 0.06 = 0.34$<br>
                            $p_X(2) = 0.06 + 0.14 + 0.30 = 0.50$</p>
                            <p>Marginal pmf of Y (sum columns):<br>
                            $p_Y(0) = 0.10 + 0.08 + 0.06 = 0.24$<br>
                            $p_Y(1) = 0.04 + 0.20 + 0.14 = 0.38$<br>
                            $p_Y(2) = 0.02 + 0.06 + 0.30 = 0.38$</p>
                            <p>Using $p_X(x)$: $P(X \le 1) = p_X(0) + p_X(1) = 0.16 + 0.34 = 0.50$.</p>
                            <strong>e. Are X and Y independent rv's? Explain.</strong>
                            <p>Check if $p(x, y) = p_X(x) p_Y(y)$ for all $(x, y)$.<br>
                            Test $(0, 0)$: $p(0, 0) = 0.10$. $p_X(0) p_Y(0) = (0.16)(0.24) = 0.0384$.<br>
                            Since $0.10 \neq 0.0384$, X and Y are **not** independent.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question 2 -->
        <div class="accordion-item" data-state="collapsed">
            <div class="accordion-header">
                <h2>2. Health-Food Store Grain (Joint PDF)</h2>
                <span class="difficulty-rating"></span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">
                    <div class="question-block hidden">
                        <strong>Question:</strong>
                        <p>A health-food store stocks two different brands of a certain type of grain. Let X = the amount (kg) of brand A on hand and Y = the amount of brand B on hand. Suppose the joint pdf of X and Y is<br>
                        $f(x,y) = \begin{cases} kxy, & x \ge 0, y \ge 0, 20 \le x+y \le 30 \\ 0, & \text{otherwise} \end{cases}$<br>
                        a. Determine the value of k.<br>
                        b. Are X and Y independent? Answer by first deriving the marginal pdf of each variable.<br>
                        c. Compute P(X + Y ≤ 25).<br>
                        d. What is the expected total amount of this grain on hand?<br>
                        e. Compute Cov(X, Y) and Corr(X, Y).</p>
                    </div>
                     <div class="ratings-block hidden">
                        <span class="rating-label">Length Rating:</span> <span class="length-rating"></span><br>
                        <span class="rating-label">Complexity Rating:</span> <span class="complexity-rating"></span>
                    </div>
                    <div class="final-answer-block hidden">
                        <strong>Final Answer:</strong>
                        <p>a. $k = \frac{3}{81250}$.<br>
                        b. No, X and Y are not independent (marginal pdfs derived in solution, non-rectangular support).<br>
                        c. $P(X+Y \le 25) = \frac{369}{1040} \approx 0.3548$.<br>
                        d. $E[X+Y] = \frac{1688}{65} \approx 25.969$ kg.<br>
                        e. $Cov(X, Y) = -\frac{408008}{12675} \approx -32.19$. $Corr(X, Y) \approx -0.894$.</p>
                    </div>
                    <div class="solution-block hidden">
                        <strong>Full Solution:</strong>
                        <div class="solution-text">
                            <strong>a. Determine the value of k.</strong>
                            <p>Integrate $f(x,y)$ over the region $R = \{(x,y) | x \ge 0, y \ge 0, 20 \le x+y \le 30\}$ and set to 1. Use change of variables $u=x+y, v=y \implies x=u-v$, $|J|=1$. Region becomes $R': 20 \le u \le 30, 0 \le v \le u$.<br>
                            $1 = \int_{20}^{30} \int_0^u k(u-v)v \,dv \,du = k \int_{20}^{30} [\frac{uv^2}{2} - \frac{v^3}{3}]_0^u \,du$<br>
                            $1 = k \int_{20}^{30} (\frac{u^3}{2} - \frac{u^3}{3}) \,du = k \int_{20}^{30} \frac{u^3}{6} \,du = k [\frac{u^4}{24}]_{20}^{30}$<br>
                            $1 = \frac{k}{24} (30^4 - 20^4) = \frac{k}{24} (650000) \implies k = \frac{24}{650000} = \frac{3}{81250}$.</p>
                            <strong>b. Are X and Y independent? Marginal pdfs.</strong>
                            <p>Marginal for X, $f_X(x)$. Split into two cases based on region limits.<br>
                            Case 1: $0 \le x \le 20$. $y$ ranges from $20-x$ to $30-x$.<br>
                            $f_X(x) = \int_{20-x}^{30-x} kxy \,dy = \frac{kx}{2} [(30-x)^2 - (20-x)^2] = \frac{kx}{2} (500 - 20x)$.<br>
                            Case 2: $20 < x \le 30$. $y$ ranges from $0$ to $30-x$.<br>
                            $f_X(x) = \int_{0}^{30-x} kxy \,dy = \frac{kx}{2} (30-x)^2$.<br>
                            Marginal for Y, $f_Y(y)$ is symmetric.<br>
                            $f_Y(y) = \begin{cases} \frac{ky}{2} (500 - 20y), & 0 \le y \le 20 \\ \frac{ky}{2} (30-y)^2, & 20 < y \le 30 \\ 0, & \text{otherwise} \end{cases}$<br>
                            Since the support region is not rectangular and $f(x,y) \neq f_X(x)f_Y(y)$, X and Y are **not** independent.</p>
                            <strong>c. Compute P(X + Y ≤ 25).</strong>
                            <p>Integrate over $R' = \{(x,y) | x \ge 0, y \ge 0, 20 \le x+y \le 25\}$. In $uv$-plane: $20 \le u \le 25, 0 \le v \le u$.<br>
                            $P(X+Y \le 25) = \int_{20}^{25} \int_0^u k(u-v)v \,dv \,du = k \int_{20}^{25} \frac{u^3}{6} \,du$<br>
                            $= k [\frac{u^4}{24}]_{20}^{25} = \frac{k}{24} (25^4 - 20^4) = \frac{3}{81250 \times 24} (230625) = \frac{230625}{650000} = \frac{369}{1040} \approx 0.3548$.</p>
                            <strong>d. What is the expected total amount of this grain on hand?</strong>
                            <p>$E[X+Y] = \int \int_R (x+y) kxy \,dA$. In $uv$-plane: $x+y=u$.<br>
                            $E[X+Y] = \int_{20}^{30} \int_0^u u [k(u-v)v] \,dv \,du = k \int_{20}^{30} u (\frac{u^3}{6}) \,du = k \int_{20}^{30} \frac{u^4}{6} \,du$<br>
                            $= k [\frac{u^5}{30}]_{20}^{30} = \frac{k}{30} (30^5 - 20^5) = \frac{3}{81250 \times 30} (21100000) = \frac{21100}{812.5} = \frac{1688}{65} \approx 25.969$ kg.</p>
                            <strong>e. Compute Cov(X, Y) and Corr(X, Y).</strong>
                            <p>By symmetry $E[X]=E[Y]=\frac{1}{2}E[X+Y] = \frac{844}{65}$.<br>
                            $E[XY] = k \int \int_R x^2 y^2 dA = k \int_{20}^{30} \int_0^u (u-v)^2 v^2 \,dv \,du$<br>
                            $= k \int_{20}^{30} (\frac{u^5}{30}) \,du = k [\frac{u^6}{180}]_{20}^{30} = \frac{k}{180}(30^6-20^6) = \frac{3}{81250 \times 180} (665000000) = \frac{5320}{39}$.<br>
                            $Cov(X,Y) = E[XY] - E[X]E[Y] = \frac{5320}{39} - (\frac{844}{65})^2 = \frac{-408008}{12675} \approx -32.19$.<br>
                            $E[X^2] = k \int \int_R x^3 y dA = k \int_{20}^{30} \int_0^u (u-v)^3 v dv du$<br>
                            $= k \int_{20}^{30} (\frac{u^5}{20}) du = k [\frac{u^6}{120}]_{20}^{30} = \frac{k}{120}(30^6-20^6) = \frac{2660}{13}$.<br>
                            $Var(X) = E[X^2] - (E[X])^2 = \frac{2660}{13} - (\frac{844}{65})^2 = \frac{152164}{4225}$. By symmetry $Var(Y)=Var(X)$.<br>
                            $Corr(X,Y) = \frac{Cov(X,Y)}{\sqrt{Var(X)Var(Y)}} = \frac{Cov(X,Y)}{Var(X)} = \frac{-408008/12675}{152164/4225} = \frac{-408008}{3 \times 152164} \approx -0.894$.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question 3 -->
        <div class="accordion-item" data-state="collapsed">
            <div class="accordion-header">
                <h2>3. Gift-Wrap Service Customers & Packages</h2>
                <span class="difficulty-rating"></span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">
                    <div class="question-block hidden">
                        <strong>Question:</strong>
                        <p>The number of customers waiting for gift-wrap service at a department store is an rv X with possible values 0, 1, 2, 3, 4 and corresponding probabilities 0.1, 0.2, 0.3, 0.25, 0.15. A randomly selected customer will have 1, 2, or 3 packages for wrapping with probabilities 0.6, 0.3, and 0.1, respectively. Let Y = the total number of packages to be wrapped for the customers waiting in line (assume that the number of packages submitted by one customer is independent of the number submitted by any other customer).<br>
                        a. Determine P(X = 3, Y = 3), i.e., p(3, 3).<br>
                        b. Determine p(4, 11).</p>
                    </div>
                     <div class="ratings-block hidden">
                        <span class="rating-label">Length Rating:</span> <span class="length-rating"></span><br>
                        <span class="rating-label">Complexity Rating:</span> <span class="complexity-rating"></span>
                    </div>
                    <div class="final-answer-block hidden">
                        <strong>Final Answer:</strong>
                        <p>a. $P(X=3, Y=3) = 0.054$<br>
                        b. $P(X=4, Y=11) = 0.00018$</p>
                    </div>
                    <div class="solution-block hidden">
                        <strong>Full Solution:</strong>
                        <div class="solution-text">
                            <p>PMF of customers X: $P_X(0)=0.1, P_X(1)=0.2, P_X(2)=0.3, P_X(3)=0.25, P_X(4)=0.15$.<br>
                            PMF of packages per customer N: $P_N(1)=0.6, P_N(2)=0.3, P_N(3)=0.1$.</p>
                            <strong>a. Determine P(X = 3, Y = 3), i.e., p(3, 3).</strong>
                            <p>$P(X=3, Y=3) = P(Y=3 | X=3) P(X=3)$.<br>
                            $P(X=3) = 0.25$.<br>
                            If $X=3$, then $Y=N_1+N_2+N_3$. For $Y=3$, requires $N_1=1, N_2=1, N_3=1$.<br>
                            $P(Y=3 | X=3) = P(N_1=1)P(N_2=1)P(N_3=1)$ (by independence)<br>
                            $= [P_N(1)]^3 = (0.6)^3 = 0.216$.<br>
                            $P(X=3, Y=3) = (0.216)(0.25) = 0.054$.</p>
                            <strong>b. Determine p(4, 11).</strong>
                            <p>$P(X=4, Y=11) = P(Y=11 | X=4) P(X=4)$.<br>
                            $P(X=4) = 0.15$.<br>
                            If $X=4$, then $Y=N_1+N_2+N_3+N_4$. For $Y=11$, requires packages $\{3, 3, 3, 2\}$.<br>
                            Prob. of one specific order (e.g., 3,3,3,2) = $[P_N(3)]^3 P_N(2) = (0.1)^3 (0.3) = 0.0003$.<br>
                            Number of distinct orders = $\binom{4}{1} = 4$.<br>
                            $P(Y=11 | X=4) = 4 \times 0.0003 = 0.0012$.<br>
                            $P(X=4, Y=11) = (0.0012)(0.15) = 0.00018$.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question 4 -->
        <div class="accordion-item" data-state="collapsed">
            <div class="accordion-header">
                <h2>4. Minicomputer Component Lifetimes</h2>
                <span class="difficulty-rating"></span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">
                    <div class="question-block hidden">
                        <strong>Question:</strong>
                        <p>Two components of a minicomputer have the following joint pdf for their useful lifetimes X and Y:<br>
                        $f(x,y) = \begin{cases} xe^{-x(1+y)}, & x \ge 0 \text{ and } y \ge 0 \\ 0, & \text{otherwise} \end{cases}$<br>
                        a. What is the probability that the lifetime X of the first component exceeds 3?<br>
                        b. What are the marginal pdf's of X and Y? Are the two lifetimes independent? Explain.<br>
                        c. What is the probability that the lifetime of at least one component exceeds 3?</p>
                    </div>
                     <div class="ratings-block hidden">
                        <span class="rating-label">Length Rating:</span> <span class="length-rating"></span><br>
                        <span class="rating-label">Complexity Rating:</span> <span class="complexity-rating"></span>
                    </div>
                    <div class="final-answer-block hidden">
                        <strong>Final Answer:</strong>
                        <p>a. $P(X > 3) = e^{-3} \approx 0.0498$<br>
                        b. $f_X(x) = e^{-x}$ for $x \ge 0$. $f_Y(y) = \frac{1}{(1+y)^2}$ for $y \ge 0$. No, they are not independent ($f(x,y) \neq f_X(x) f_Y(y)$).<br>
                        c. $P(X > 3 \text{ or } Y > 3) = \frac{1}{4} + e^{-3} - \frac{1}{4}e^{-12} \approx 0.2998$</p>
                    </div>
                    <div class="solution-block hidden">
                        <strong>Full Solution:</strong>
                        <div class="solution-text">
                            <strong>a. What is $P(X > 3)$?</strong>
                            <p>Find marginal pdf $f_X(x) = \int_0^{\infty} xe^{-x(1+y)} dy = xe^{-x} \int_0^{\infty} e^{-xy} dy$.<br>
                            For $x>0$, $\int_0^{\infty} e^{-xy} dy = [\frac{e^{-xy}}{-x}]_0^{\infty} = 0 - (\frac{1}{-x}) = \frac{1}{x}$.<br>
                            So, $f_X(x) = xe^{-x} (\frac{1}{x}) = e^{-x}$ for $x \ge 0$. (Exponential, $\lambda=1$).<br>
                            $P(X > 3) = \int_3^{\infty} e^{-x} dx = [-e^{-x}]_3^{\infty} = 0 - (-e^{-3}) = e^{-3} \approx 0.0498$.</p>
                            <strong>b. Marginal pdf's and Independence?</strong>
                            <p>$f_X(x) = e^{-x}$ for $x \ge 0$.<br>
                            $f_Y(y) = \int_0^{\infty} xe^{-x(1+y)} dx$. Use Integration by Parts ($u=x, dv=e^{-x(1+y)}dx$).<br>
                            $f_Y(y) = [x \frac{e^{-x(1+y)}}{-(1+y)}]_0^{\infty} - \int_0^{\infty} \frac{e^{-x(1+y)}}{-(1+y)} dx$<br>
                            $f_Y(y) = 0 + \frac{1}{1+y} \int_0^{\infty} e^{-x(1+y)} dx = \frac{1}{1+y} [\frac{e^{-x(1+y)}}{-(1+y)}]_0^{\infty}$<br>
                            $f_Y(y) = \frac{1}{1+y} [0 - (\frac{1}{-(1+y)})] = \frac{1}{(1+y)^2}$ for $y \ge 0$.<br>
                            Check independence: Is $f(x,y) = f_X(x) f_Y(y)$?<br>
                            $f_X(x) f_Y(y) = e^{-x} \frac{1}{(1+y)^2} = \frac{e^{-x}}{(1+y)^2}$.<br>
                            This is not equal to $f(x,y) = xe^{-x(1+y)}$. Therefore, X and Y are **not** independent.</p>
                            <strong>c. P(at least one exceeds 3)?</strong>
                            <p>$P(X > 3 \text{ or } Y > 3) = 1 - P(X \le 3, Y \le 3)$.<br>
                            $P(X \le 3, Y \le 3) = \int_0^3 \int_0^3 xe^{-x(1+y)} dy dx$.<br>
                            Inner integral (w.r.t y): $\int_0^3 xe^{-x(1+y)} dy = [-e^{-x(1+y)}]_0^3 = -e^{-4x} + e^{-x}$.<br>
                            Outer integral (w.r.t x): $\int_0^3 (e^{-x} - e^{-4x}) dx = [-e^{-x} + \frac{1}{4}e^{-4x}]_0^3$<br>
                            $= (-e^{-3} + \frac{1}{4}e^{-12}) - (-e^0 + \frac{1}{4}e^0) = -e^{-3} + \frac{1}{4}e^{-12} - (-1 + \frac{1}{4})$<br>
                            $= \frac{3}{4} - e^{-3} + \frac{1}{4}e^{-12}$.<br>
                            $P(X > 3 \text{ or } Y > 3) = 1 - [\frac{3}{4} - e^{-3} + \frac{1}{4}e^{-12}] = \frac{1}{4} + e^{-3} - \frac{1}{4}e^{-12}$.<br>
                            $\approx 0.25 + 0.0498 + 0 \approx 0.2998$.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question 5 -->
        <div class="accordion-item" data-state="collapsed">
            <div class="accordion-header">
                <h2>5. Restaurant Dinner Costs</h2>
                <span class="difficulty-rating"></span>
            </div>
            <div class="accordion-content">
                <div class="content-inner">
                    <div class="question-block hidden">
                        <strong>Question:</strong>
                        <p>A restaurant serves three fixed-price dinners costing $12, $15, and $20. For a randomly selected couple dining at this restaurant, let X = the cost of the man's dinner and Y = the cost of the woman's dinner. The joint pmf of X and Y is given in the following table:</p>
                        <pre>
      p(x, y) | y=12 | y=15 | y=20
      -----------------------------
      x=12    |  .05 |  .05 |  .10
      x=15    |  .05 |  .10 |  .35
      x=20    |  .00 |  .20 |  .10
                        </pre>
                        <p>a. Compute the marginal pmf's of X and Y.<br>
                        b. What is the probability that the man's and the woman's dinner cost at most $15 each?<br>
                        c. Are X and Y independent? Justify your answer.<br>
                        d. What is the expected total cost of the dinner for the two people?</p>
                    </div>
                     <div class="ratings-block hidden">
                        <span class="rating-label">Length Rating:</span> <span class="length-rating"></span><br>
                        <span class="rating-label">Complexity Rating:</span> <span class="complexity-rating"></span>
                    </div>
                    <div class="final-answer-block hidden">
                        <strong>Final Answer:</strong>
                        <p>a. $p_X(12)=0.20, p_X(15)=0.50, p_X(20)=0.30$. $p_Y(12)=0.10, p_Y(15)=0.35, p_Y(20)=0.55$.<br>
                        b. $P(X \le 15, Y \le 15) = 0.25$.<br>
                        c. No, X and Y are not independent (e.g., $p(12, 12) \neq p_X(12)p_Y(12)$).<br>
                        d. Expected total cost $E[X+Y] = 33.35$.</p>
                    </div>
                    <div class="solution-block hidden">
                        <strong>Full Solution:</strong>
                        <div class="solution-text">
                            <strong>a. Compute the marginal pmf's of X and Y.</strong>
                            <p>Sum rows for $p_X(x)$:<br>
                            $p_X(12) = 0.05 + 0.05 + 0.10 = 0.20$<br>
                            $p_X(15) = 0.05 + 0.10 + 0.35 = 0.50$<br>
                            $p_X(20) = 0.00 + 0.20 + 0.10 = 0.30$</p>
                            <p>Sum columns for $p_Y(y)$:<br>
                            $p_Y(12) = 0.05 + 0.05 + 0.00 = 0.10$<br>
                            $p_Y(15) = 0.05 + 0.10 + 0.20 = 0.35$<br>
                            $p_Y(20) = 0.10 + 0.35 + 0.10 = 0.55$</p>
                            <strong>b. P(man's and woman's cost at most $15 each)?</strong>
                            <p>$P(X \le 15, Y \le 15) = p(12, 12) + p(12, 15) + p(15, 12) + p(15, 15)$<br>
                            $= 0.05 + 0.05 + 0.05 + 0.10 = 0.25$.</p>
                            <strong>c. Are X and Y independent?</strong>
                            <p>Check if $p(x, y) = p_X(x) p_Y(y)$.<br>
                            Test (12, 12): $p(12, 12) = 0.05$. $p_X(12) p_Y(12) = (0.20)(0.10) = 0.02$.<br>
                            Since $0.05 \neq 0.02$, X and Y are **not** independent.</p>
                            <strong>d. Expected total cost?</strong>
                            <p>$E[X+Y] = E[X] + E[Y]$.<br>
                            $E[X] = (12)(0.20) + (15)(0.50) + (20)(0.30) = 2.40 + 7.50 + 6.00 = 15.90$.<br>
                            $E[Y] = (12)(0.10) + (15)(0.35) + (20)(0.55) = 1.20 + 5.25 + 11.00 = 17.45$.<br>
                            $E[X+Y] = 15.90 + 17.45 = 33.35$.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div> <!-- end accordion -->

    <!-- Font Size Slider -->
    <div class="font-control">
        <input type="range" id="fontSizeSlider" min="10" max="50" value="16" step="1">
        <span id="fontSizeValue">16px</span>
    </div>

    <!-- JavaScript -->
    <script>
        // --- Data for Ratings (Tutorial 9) ---
        const questionsData = [
            { lengthRating: 3, complexityRating: 1 }, // Q1
            { lengthRating: 5, complexityRating: 4 }, // Q2
            { lengthRating: 3, complexityRating: 3 }, // Q3
            { lengthRating: 4, complexityRating: 3 }, // Q4
            { lengthRating: 3, complexityRating: 2 }  // Q5
        ];

        // --- Utility Functions ---
        function generateStars(rating) { const roundedRating = Math.max(1, Math.min(5, Math.round(rating))); let colorClass; if (roundedRating <= 2) { colorClass = 'green'; } else if (roundedRating === 3) { colorClass = 'yellow'; } else { colorClass = 'red'; } let starsHTML = '<span class="stars">'; for (let i = 1; i <= 5; i++) { starsHTML += `<span class="star-${i <= roundedRating ? 'filled ' + colorClass : 'empty'}">${i <= roundedRating ? '★' : '☆'}</span>`; } starsHTML += '</span>'; return starsHTML; }
        function calculateDifficulty(lengthRating, complexityRating) { const avg = (lengthRating + complexityRating) / 2; return Math.max(1, Math.min(5, Math.round(avg))); }
        function debounce(func, wait) { let timeout; return function executedFunction(...args) { const later = () => { clearTimeout(timeout); func(...args); }; clearTimeout(timeout); timeout = setTimeout(later, wait); }; }
        const mathJaxLoadedPromise = new Promise((resolve) => { if (window.MathJax && window.MathJax.startup) { window.MathJax.startup.promise.then(resolve); } else { window.addEventListener('MathJaxLoaded', resolve, {once: true}); } }); if (document.readyState === "complete" || document.readyState === "interactive") { if(window.MathJax && window.MathJax.startup) window.dispatchEvent(new Event('MathJaxLoaded')); } else { window.addEventListener('load', () => { if(window.MathJax && window.MathJax.startup) window.dispatchEvent(new Event('MathJaxLoaded')); }); }
        function typesetMath(elements = [document.body]) { console.log("Attempting to typeset math in:", elements); mathJaxLoadedPromise.then(() => { console.log("MathJax confirmed ready, calling typesetPromise."); return MathJax.typesetPromise(elements); }).then(() => { console.log("MathJax typesetting complete for:", elements); }).catch(err => console.error('MathJax Typesetting Error:', err)); }

        // --- Accordion Update Function ---
         function updateAccordion(contentElement, makeActive) {
            if (!contentElement) return;
            const innerContent = contentElement.querySelector('.content-inner');
            const collapseDelay = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--collapse-delay') || '0.1') * 1000; // Read from CSS var

             if (makeActive) {
                 // EXPANDING
                 contentElement.classList.add('active');
                 typesetMath([innerContent]);
                 requestAnimationFrame(() => { // Ensure DOM update before measurement
                    const currentTransition = contentElement.style.transition;
                     contentElement.style.transition = 'none'; // Temporarily disable transitions for height calculation
                    const scrollHeight = innerContent.offsetHeight;
                    const style = window.getComputedStyle(contentElement);
                    const totalHeight = scrollHeight + parseFloat(style.paddingTop);
                     contentElement.style.maxHeight = totalHeight + "px"; // Set target height
                    console.log(`Expanding: Calculated totalHeight = ${totalHeight}px`);
                     requestAnimationFrame(() => { // Re-enable transitions after height is set
                         contentElement.style.transition = currentTransition;
                     });
                });
            } else {
                 // CLOSING
                contentElement.classList.remove('active'); // Starts inner content fade out immediately
                console.log('Closing: Removed .active class, starting fade/pad collapse.');
                 setTimeout(() => {
                    contentElement.style.maxHeight = '0px'; // Start container collapse after delay
                     console.log(`Closing: Delayed setting max-height=0 by ${collapseDelay}ms`);
                 }, collapseDelay);
            }
         }

        // --- Event Listeners and Setup ---
        document.addEventListener('DOMContentLoaded', () => {
             console.log("DOM Ready - Tutorial 9");
            const accordionItems = document.querySelectorAll('.accordion-item');
             const slider = document.getElementById('fontSizeSlider');
            const sizeValueSpan = document.getElementById('fontSizeValue');

            // --- Font Size Slider ---
             const handleFontSizeChange = debounce(() => {
                 console.log("Handling font size change..."); typesetMath(); // Retypeset on resize
                 // Adjust height of any open accordion items after font size change
                 accordionItems.forEach(item => {
                    const content = item.querySelector('.accordion-content');
                    if (content.classList.contains('active') && parseFloat(content.style.maxHeight) > 0) {
                         console.log("Adjusting height for open item:", item);
                         // Temporarily disable transitions to avoid jumpy resize
                        const currentTransition = content.style.transition;
                        content.style.transition = 'none';
                        content.style.maxHeight = 'none'; // Allow content to reflow naturally

                        requestAnimationFrame(() => { // Measure after reflow
                            const innerContent = content.querySelector('.content-inner');
                            const scrollHeight = innerContent.offsetHeight;
                            const style = window.getComputedStyle(content);
                            const totalHeight = scrollHeight + parseFloat(style.paddingTop);
                            content.style.maxHeight = totalHeight + 'px'; // Apply new calculated height

                            requestAnimationFrame(() => { // Restore transitions
                                content.style.transition = currentTransition;
                            });
                            console.log("Font Change - Adjusted height to:", totalHeight);
                        });
                     }
                 });
             }, 250); // Debounce typesetting/height adjustment

             slider.addEventListener('input', () => {
                 const newSize = slider.value;
                 document.documentElement.style.setProperty('--base-font-size', newSize + 'px');
                 sizeValueSpan.textContent = newSize + 'px';
                 handleFontSizeChange(); // Call debounced handler
             });

            // --- Accordion Logic ---
            accordionItems.forEach((item, index) => {
                const header = item.querySelector('.accordion-header');
                const content = item.querySelector('.accordion-content');
                const innerContent = content.querySelector('.content-inner');

                // Ratings setup
                const difficultyRatingSpan = header.querySelector('.difficulty-rating');
                const lengthRatingSpan = content.querySelector('.length-rating');
                const complexityRatingSpan = content.querySelector('.complexity-rating');
                // Ensure index is within bounds of questionsData
                if (index < questionsData.length) {
                    const { lengthRating, complexityRating } = questionsData[index];
                    difficultyRatingSpan.innerHTML = generateStars(calculateDifficulty(lengthRating, complexityRating));
                    if (lengthRatingSpan) lengthRatingSpan.innerHTML = generateStars(lengthRating);
                    if (complexityRatingSpan) complexityRatingSpan.innerHTML = generateStars(complexityRating);
                } else {
                    console.warn(`No data found for question index ${index}`);
                }

                 // Cache blocks & hide initially
                 const questionBlock = innerContent.querySelector('.question-block');
                 const ratingsBlock = innerContent.querySelector('.ratings-block');
                 const finalAnswerBlock = innerContent.querySelector('.final-answer-block');
                 const solutionBlock = innerContent.querySelector('.solution-block');
                 [questionBlock, ratingsBlock, finalAnswerBlock, solutionBlock].forEach(el => {
                     if (el) el.classList.add('hidden');
                 });

                 // Click Listener for state transitions
                 item.addEventListener('click', (event) => {
                     // Prevent toggle if click is inside the content area (e.g., selecting text)
                     if (innerContent.contains(event.target)) {
                         console.log("Clicked inside inner content, ignoring toggle.");
                         return;
                     }

                     const currentState = item.getAttribute('data-state');
                     let nextState;

                     // State machine: collapsed -> state1 (Q+R+A) -> state2 (Q+R+S) -> collapsed
                     switch (currentState) {
                         case 'collapsed': nextState = 'state1'; break;
                         case 'state1':    nextState = 'state2'; break;
                         case 'state2':    nextState = 'collapsed'; break;
                         default:          nextState = 'collapsed'; // Fallback
                     }

                     item.setAttribute('data-state', nextState);
                     console.log(`Item ${index + 1} state changed: ${currentState} -> ${nextState}`);

                     // Determine visibility based on the new state
                     const showQ = nextState !== 'collapsed'; // Question visible in state1 & state2
                     const showR = nextState !== 'collapsed'; // Ratings visible in state1 & state2
                     const showA = nextState === 'state1';    // Answer only in state1
                     const showS = nextState === 'state2';    // Solution only in state2

                     // Toggle visibility classes
                     if (questionBlock) questionBlock.classList.toggle('hidden', !showQ);
                     if (ratingsBlock) ratingsBlock.classList.toggle('hidden', !showR);
                     if (finalAnswerBlock) finalAnswerBlock.classList.toggle('hidden', !showA);
                     if (solutionBlock) solutionBlock.classList.toggle('hidden', !showS);

                     // Update Accordion Animation/Height
                     updateAccordion(content, nextState !== 'collapsed');
                });
             });

            // Initial Font Size & Log
            const initialSize = slider.value;
            document.documentElement.style.setProperty('--base-font-size', initialSize + 'px');
            sizeValueSpan.textContent = initialSize + 'px';
            console.log("Initial setup complete.");
            typesetMath(); // Initial typeset after DOM ready

        }); // End DOMContentLoaded

    </script>

</body>
</html>